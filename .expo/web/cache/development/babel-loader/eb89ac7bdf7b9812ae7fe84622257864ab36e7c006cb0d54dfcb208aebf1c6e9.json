{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"containerStyle\", \"source\", \"loader\", \"style\", \"onLoad\", \"animationDuration\", \"testID\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useCallback, useMemo } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated, { useSharedValue, useAnimatedStyle, withTiming } from 'react-native-reanimated';\nimport View from \"../../components/view\";\nimport Image from \"../../components/image\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar UIAnimatedImage = Animated.createAnimatedComponent(Image);\nvar AnimatedImage = function AnimatedImage(props) {\n  var containerStyle = props.containerStyle,\n    source = props.source,\n    loader = props.loader,\n    style = props.style,\n    propsOnLoad = props.onLoad,\n    _props$animationDurat = props.animationDuration,\n    animationDuration = _props$animationDurat === void 0 ? 300 : _props$animationDurat,\n    testID = props.testID,\n    others = _objectWithoutProperties(props, _excluded);\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var opacity = useSharedValue(0);\n  useDidUpdate(function () {\n    if (!loader) {\n      opacity.value = 1;\n    }\n  }, [loader]);\n  var onLoad = useCallback(function (event) {\n    setIsLoading(false);\n    propsOnLoad == null ? void 0 : propsOnLoad(event);\n    if (opacity.value === 0) {\n      opacity.value = withTiming(1, {\n        duration: animationDuration\n      });\n    }\n  }, [setIsLoading, propsOnLoad, animationDuration]);\n  var fadeInStyle = useAnimatedStyle(function () {\n    return {\n      opacity: opacity.value\n    };\n  });\n  var _style = useMemo(function () {\n    return [style, fadeInStyle];\n  }, [style]);\n  return _jsxs(View, {\n    style: containerStyle,\n    children: [_jsx(UIAnimatedImage, _objectSpread(_objectSpread({}, others), {}, {\n      style: _style,\n      source: source,\n      onLoad: onLoad,\n      testID: testID\n    })), isLoading && loader && _jsx(View, {\n      style: styles.loader,\n      children: loader\n    })]\n  });\n};\nAnimatedImage.displayName = 'AnimatedImage';\nexport default AnimatedImage;\nvar styles = StyleSheet.create({\n  loader: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n    justifyContent: 'center'\n  })\n});","map":{"version":3,"names":["React","useState","useCallback","useMemo","StyleSheet","Animated","useSharedValue","useAnimatedStyle","withTiming","View","Image","useDidUpdate","jsx","_jsx","jsxs","_jsxs","UIAnimatedImage","createAnimatedComponent","AnimatedImage","props","containerStyle","source","loader","style","propsOnLoad","onLoad","_props$animationDurat","animationDuration","testID","others","_objectWithoutProperties","_excluded","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","opacity","value","event","duration","fadeInStyle","_style","children","_objectSpread","styles","displayName","create","absoluteFillObject","justifyContent"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/animatedImage/index.js"],"sourcesContent":["// TODO: consider unify this component functionality with our Image component\nimport React, { useState, useCallback, useMemo } from 'react';\nimport { StyleSheet } from 'react-native';\nimport Animated, { useSharedValue, useAnimatedStyle, withTiming } from 'react-native-reanimated';\nimport View from \"../../components/view\";\nimport Image from \"../../components/image\";\nimport { useDidUpdate } from \"../../hooks\";\nconst UIAnimatedImage = Animated.createAnimatedComponent(Image);\n/**\n * @description: Image component that fades-in the image with animation once it's loaded\n * @extends: Animated.Image\n * @gif: https://media.giphy.com/media/l0HU7jj0ivEFyZIA0/giphy.gif\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/AnimatedImageScreen.js\n */\nconst AnimatedImage = props => {\n  const {\n    containerStyle,\n    source,\n    loader,\n    style,\n    onLoad: propsOnLoad,\n    animationDuration = 300,\n    testID,\n    ...others\n  } = props;\n  const [isLoading, setIsLoading] = useState(true);\n  const opacity = useSharedValue(0);\n  useDidUpdate(() => {\n    if (!loader) {\n      opacity.value = 1;\n    }\n  }, [loader]);\n  const onLoad = useCallback(event => {\n    setIsLoading(false);\n    propsOnLoad?.(event);\n    // did not start the animation already\n    if (opacity.value === 0) {\n      opacity.value = withTiming(1, {\n        duration: animationDuration\n      });\n    }\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [setIsLoading, propsOnLoad, animationDuration]);\n  const fadeInStyle = useAnimatedStyle(() => {\n    return {\n      opacity: opacity.value\n    };\n  });\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const _style = useMemo(() => [style, fadeInStyle], [style]);\n  return <View style={containerStyle}>\n      <UIAnimatedImage {...others} style={_style} source={source} onLoad={onLoad} testID={testID} />\n      {isLoading && loader && <View style={styles.loader}>{loader}</View>}\n    </View>;\n};\nAnimatedImage.displayName = 'AnimatedImage';\nexport default AnimatedImage;\nconst styles = StyleSheet.create({\n  loader: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'center'\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}