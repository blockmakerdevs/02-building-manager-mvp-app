{"ast":null,"code":"import { useCallback } from 'react';\nimport { useSharedValue, withSpring, withTiming, useAnimatedGestureHandler, runOnJS } from 'react-native-reanimated';\nimport { PanningDirectionsEnum, getTranslation, getDismissVelocity, DEFAULT_THRESHOLD } from \"./panningUtil\";\nexport var PanViewDirectionsEnum = PanningDirectionsEnum;\nexport var DEFAULT_DIRECTIONS = [PanViewDirectionsEnum.UP, PanViewDirectionsEnum.DOWN, PanViewDirectionsEnum.LEFT, PanViewDirectionsEnum.RIGHT];\nvar DEFAULT_ANIMATION_VELOCITY = 300;\nexport var DEFAULT_ANIMATION_CONFIG = {\n  velocity: DEFAULT_ANIMATION_VELOCITY,\n  damping: 18,\n  stiffness: 100,\n  mass: 0.4\n};\nvar SPRING_BACK_ANIMATION_CONFIG = {\n  velocity: DEFAULT_ANIMATION_VELOCITY,\n  damping: 20,\n  stiffness: 300,\n  mass: 0.8\n};\nvar usePanGesture = function usePanGesture(props) {\n  var _props$directions = props.directions,\n    directions = _props$directions === void 0 ? DEFAULT_DIRECTIONS : _props$directions,\n    dismissible = props.dismissible,\n    animateToOrigin = props.animateToOrigin,\n    onDismiss = props.onDismiss,\n    directionLock = props.directionLock,\n    _props$threshold = props.threshold,\n    threshold = _props$threshold === void 0 ? DEFAULT_THRESHOLD : _props$threshold,\n    hiddenLocation = props.hiddenLocation;\n  var waitingForDismiss = useSharedValue(false);\n  var translationX = useSharedValue(0);\n  var translationY = useSharedValue(0);\n  var getTranslationOptions = function getTranslationOptions() {\n    'worklet';\n\n    return {\n      directionLock: directionLock,\n      currentTranslation: {\n        x: translationX.value,\n        y: translationY.value\n      }\n    };\n  };\n  var setTranslation = function setTranslation(event, initialTranslation) {\n    'worklet';\n\n    var result = getTranslation(event, initialTranslation, directions, getTranslationOptions());\n    translationX.value = result.x;\n    translationY.value = result.y;\n  };\n  var dismiss = useCallback(function (isFinished) {\n    'worklet';\n\n    if (isFinished && waitingForDismiss.value && onDismiss) {\n      waitingForDismiss.value = false;\n      runOnJS(onDismiss)();\n    }\n  }, [onDismiss]);\n  var returnToOrigin = useCallback(function () {\n    'worklet';\n\n    if (animateToOrigin) {\n      translationX.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n      translationY.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n    }\n  }, [animateToOrigin]);\n  var reset = useCallback(function () {\n    'worklet';\n\n    translationX.value = withSpring(0, DEFAULT_ANIMATION_CONFIG);\n    translationY.value = withSpring(0, DEFAULT_ANIMATION_CONFIG);\n  }, [animateToOrigin]);\n  var onGestureEvent = useAnimatedGestureHandler({\n    onStart: function onStart(_event, context) {\n      context.initialTranslation = {\n        x: translationX.value,\n        y: translationY.value\n      };\n    },\n    onActive: function onActive(event, context) {\n      setTranslation(event, context.initialTranslation);\n    },\n    onEnd: function onEnd(event) {\n      if (dismissible) {\n        var velocity = getDismissVelocity(event, directions, getTranslationOptions(), threshold);\n        if (velocity) {\n          waitingForDismiss.value = true;\n          if (translationX.value !== 0 && velocity.x !== undefined && velocity.x !== 0) {\n            var toX = velocity.x > 0 ? hiddenLocation.right : hiddenLocation.left;\n            var duration = Math.abs((toX - translationX.value) / velocity.x) * 1000;\n            translationX.value = withTiming(toX, {\n              duration: duration\n            }, dismiss);\n          }\n          if (translationY.value !== 0 && velocity.y !== undefined && velocity.y !== 0) {\n            var toY = velocity.y > 0 ? hiddenLocation.down : hiddenLocation.up;\n            var _duration = Math.abs((toY - translationY.value) / velocity.y) * 1000;\n            translationY.value = withTiming(toY, {\n              duration: _duration\n            }, dismiss);\n          }\n        } else {\n          returnToOrigin();\n        }\n      } else {\n        returnToOrigin();\n      }\n    }\n  }, [directions, dismissible, setTranslation, returnToOrigin]);\n  return {\n    translation: {\n      x: translationX,\n      y: translationY\n    },\n    panGestureEvent: onGestureEvent,\n    reset: reset\n  };\n};\nexport default usePanGesture;","map":{"version":3,"names":["useCallback","useSharedValue","withSpring","withTiming","useAnimatedGestureHandler","runOnJS","PanningDirectionsEnum","getTranslation","getDismissVelocity","DEFAULT_THRESHOLD","PanViewDirectionsEnum","DEFAULT_DIRECTIONS","UP","DOWN","LEFT","RIGHT","DEFAULT_ANIMATION_VELOCITY","DEFAULT_ANIMATION_CONFIG","velocity","damping","stiffness","mass","SPRING_BACK_ANIMATION_CONFIG","usePanGesture","props","_props$directions","directions","dismissible","animateToOrigin","onDismiss","directionLock","_props$threshold","threshold","hiddenLocation","waitingForDismiss","translationX","translationY","getTranslationOptions","currentTranslation","x","value","y","setTranslation","event","initialTranslation","result","dismiss","isFinished","returnToOrigin","reset","onGestureEvent","onStart","_event","context","onActive","onEnd","undefined","toX","right","left","duration","Math","abs","toY","down","up","translation","panGestureEvent"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/incubator/panView/usePanGesture.js"],"sourcesContent":["import { useCallback } from 'react';\nimport { useSharedValue, withSpring, withTiming, useAnimatedGestureHandler, runOnJS } from 'react-native-reanimated';\nimport { PanningDirectionsEnum, getTranslation, getDismissVelocity, DEFAULT_THRESHOLD } from \"./panningUtil\";\nexport const PanViewDirectionsEnum = PanningDirectionsEnum;\nexport const DEFAULT_DIRECTIONS = [PanViewDirectionsEnum.UP, PanViewDirectionsEnum.DOWN, PanViewDirectionsEnum.LEFT, PanViewDirectionsEnum.RIGHT];\nconst DEFAULT_ANIMATION_VELOCITY = 300;\nexport const DEFAULT_ANIMATION_CONFIG = {\n  velocity: DEFAULT_ANIMATION_VELOCITY,\n  damping: 18,\n  stiffness: 100,\n  mass: 0.4\n};\nconst SPRING_BACK_ANIMATION_CONFIG = {\n  velocity: DEFAULT_ANIMATION_VELOCITY,\n  damping: 20,\n  stiffness: 300,\n  mass: 0.8\n};\nconst usePanGesture = props => {\n  const {\n    directions = DEFAULT_DIRECTIONS,\n    dismissible,\n    animateToOrigin,\n    onDismiss,\n    directionLock,\n    threshold = DEFAULT_THRESHOLD,\n    hiddenLocation\n  } = props;\n  const waitingForDismiss = useSharedValue(false);\n  const translationX = useSharedValue(0);\n  const translationY = useSharedValue(0);\n  const getTranslationOptions = () => {\n    'worklet';\n\n    return {\n      directionLock,\n      currentTranslation: {\n        x: translationX.value,\n        y: translationY.value\n      }\n    };\n  };\n  const setTranslation = (event, initialTranslation) => {\n    'worklet';\n\n    const result = getTranslation(event, initialTranslation, directions, getTranslationOptions());\n    translationX.value = result.x;\n    translationY.value = result.y;\n  };\n  const dismiss = useCallback(isFinished => {\n    'worklet';\n\n    if (isFinished && waitingForDismiss.value && onDismiss) {\n      waitingForDismiss.value = false;\n      runOnJS(onDismiss)();\n    }\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [onDismiss]);\n  const returnToOrigin = useCallback(() => {\n    'worklet';\n\n    if (animateToOrigin) {\n      translationX.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n      translationY.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [animateToOrigin]);\n  const reset = useCallback(() => {\n    'worklet';\n\n    translationX.value = withSpring(0, DEFAULT_ANIMATION_CONFIG);\n    translationY.value = withSpring(0, DEFAULT_ANIMATION_CONFIG);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [animateToOrigin]);\n  const onGestureEvent = useAnimatedGestureHandler({\n    onStart: (_event, context) => {\n      context.initialTranslation = {\n        x: translationX.value,\n        y: translationY.value\n      };\n    },\n    onActive: (event, context) => {\n      setTranslation(event, context.initialTranslation);\n    },\n    onEnd: event => {\n      if (dismissible) {\n        const velocity = getDismissVelocity(event, directions, getTranslationOptions(), threshold);\n        if (velocity) {\n          waitingForDismiss.value = true;\n          if (translationX.value !== 0 && velocity.x !== undefined && velocity.x !== 0) {\n            const toX = velocity.x > 0 ? hiddenLocation.right : hiddenLocation.left;\n            const duration = Math.abs((toX - translationX.value) / velocity.x) * 1000;\n            translationX.value = withTiming(toX, {\n              duration\n            }, dismiss);\n          }\n          if (translationY.value !== 0 && velocity.y !== undefined && velocity.y !== 0) {\n            const toY = velocity.y > 0 ? hiddenLocation.down : hiddenLocation.up;\n            const duration = Math.abs((toY - translationY.value) / velocity.y) * 1000;\n            translationY.value = withTiming(toY, {\n              duration\n            }, dismiss);\n          }\n        } else {\n          returnToOrigin();\n        }\n      } else {\n        returnToOrigin();\n      }\n    }\n  }, [directions, dismissible, setTranslation, returnToOrigin]);\n  return {\n    translation: {\n      x: translationX,\n      y: translationY\n    },\n    panGestureEvent: onGestureEvent,\n    reset\n  };\n};\nexport default usePanGesture;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}