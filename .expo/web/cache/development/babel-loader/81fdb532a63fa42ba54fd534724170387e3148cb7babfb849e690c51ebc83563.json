{"ast":null,"code":"import _isEmpty from \"lodash/isEmpty\";\nimport _isFunction from \"lodash/isFunction\";\nimport _forEach from \"lodash/forEach\";\nimport _isArray from \"lodash/isArray\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _isPlainObject from \"lodash/isPlainObject\";\nimport _isString from \"lodash/isString\";\nimport { Colors } from \"../../style\";\nimport formValidators from \"./validators\";\nexport function getColorByState(color, context) {\n  var finalColor;\n  if (_isString(color)) {\n    finalColor = color;\n  } else if (Colors.isDesignToken(color)) {\n    finalColor = color == null ? void 0 : color.toString();\n  } else if (_isPlainObject(color)) {\n    if (context != null && context.disabled) {\n      finalColor = color == null ? void 0 : color.disabled;\n    } else if (context != null && context.readonly) {\n      finalColor = color == null ? void 0 : color.readonly;\n    } else if (!(context != null && context.isValid)) {\n      finalColor = color == null ? void 0 : color.error;\n    } else if (context != null && context.isFocused) {\n      finalColor = color == null ? void 0 : color.focus;\n    }\n    finalColor = finalColor || (color == null ? void 0 : color.default) || Colors.$textDefault;\n  }\n  return finalColor;\n}\nexport function validate(value, validator) {\n  if (_isUndefined(validator)) {\n    return [true, undefined];\n  }\n  var _isValid = true;\n  var _failingValidatorIndex;\n  var _validators = _isArray(validator) ? validator : [validator];\n  _forEach(_validators, function (validator, index) {\n    if (_isFunction(validator)) {\n      _isValid = validator(value);\n    } else if (_isString(validator)) {\n      var _formValidators$valid;\n      _isValid = (_formValidators$valid = formValidators[validator]) == null ? void 0 : _formValidators$valid.call(formValidators, value || '');\n    }\n    if (!_isValid) {\n      _failingValidatorIndex = index;\n      return false;\n    }\n  });\n  return [_isValid, _failingValidatorIndex];\n}\nexport function getRelevantValidationMessage(validationMessage, failingValidatorIndex) {\n  if (_isUndefined(failingValidatorIndex)) {\n    return validationMessage;\n  } else if (_isUndefined(validationMessage)) {\n    return;\n  }\n  if (_isString(validationMessage)) {\n    return validationMessage;\n  } else if (_isArray(validationMessage)) {\n    return validationMessage[failingValidatorIndex];\n  }\n}\nexport function shouldHidePlaceholder(_ref, isFocused) {\n  var floatingPlaceholder = _ref.floatingPlaceholder,\n    hint = _ref.hint,\n    floatOnFocus = _ref.floatOnFocus;\n  if (floatingPlaceholder) {\n    if (hint && isFocused) {\n      return !floatOnFocus;\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\nexport function shouldPlaceholderFloat(_ref2, isFocused, hasValue, value) {\n  var defaultValue = _ref2.defaultValue,\n    floatOnFocus = _ref2.floatOnFocus;\n  var useDefaultValue = !_isEmpty(defaultValue) && value === undefined;\n  return floatOnFocus && isFocused || hasValue || useDefaultValue;\n}","map":{"version":3,"names":["_isEmpty","_isFunction","_forEach","_isArray","_isUndefined","_isPlainObject","_isString","Colors","formValidators","getColorByState","color","context","finalColor","isDesignToken","toString","disabled","readonly","isValid","error","isFocused","focus","default","$textDefault","validate","value","validator","undefined","_isValid","_failingValidatorIndex","_validators","index","_formValidators$valid","call","getRelevantValidationMessage","validationMessage","failingValidatorIndex","shouldHidePlaceholder","_ref","floatingPlaceholder","hint","floatOnFocus","shouldPlaceholderFloat","_ref2","hasValue","defaultValue","useDefaultValue"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/textField/Presenter.js"],"sourcesContent":["import _isEmpty from \"lodash/isEmpty\";\nimport _isFunction from \"lodash/isFunction\";\nimport _forEach from \"lodash/forEach\";\nimport _isArray from \"lodash/isArray\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _isPlainObject from \"lodash/isPlainObject\";\nimport _isString from \"lodash/isString\";\nimport { Colors } from \"../../style\";\n\n// TODO: Fix this import after moving all TextField types to a single file after we move to the new docs\n\nimport formValidators from \"./validators\";\nexport function getColorByState(color, context) {\n  let finalColor;\n  if (_isString(color)) {\n    finalColor = color;\n  } else if (Colors.isDesignToken(color)) {\n    finalColor = color?.toString();\n  } else if (_isPlainObject(color)) {\n    if (context?.disabled) {\n      finalColor = color?.disabled;\n    } else if (context?.readonly) {\n      finalColor = color?.readonly;\n    } else if (!context?.isValid) {\n      finalColor = color?.error;\n    } else if (context?.isFocused) {\n      finalColor = color?.focus;\n    }\n    finalColor = finalColor || color?.default || Colors.$textDefault;\n  }\n  return finalColor;\n}\nexport function validate(value, validator) {\n  if (_isUndefined(validator)) {\n    return [true, undefined];\n  }\n  let _isValid = true;\n  let _failingValidatorIndex;\n  const _validators = _isArray(validator) ? validator : [validator];\n  _forEach(_validators, (validator, index) => {\n    if (_isFunction(validator)) {\n      _isValid = validator(value);\n    } else if (_isString(validator)) {\n      _isValid = formValidators[validator]?.(value || '');\n    }\n    if (!_isValid) {\n      _failingValidatorIndex = index;\n      return false;\n    }\n  });\n  return [_isValid, _failingValidatorIndex];\n}\nexport function getRelevantValidationMessage(validationMessage, failingValidatorIndex) {\n  if (_isUndefined(failingValidatorIndex)) {\n    return validationMessage;\n  } else if (_isUndefined(validationMessage)) {\n    return;\n  }\n  if (_isString(validationMessage)) {\n    return validationMessage;\n  } else if (_isArray(validationMessage)) {\n    return validationMessage[failingValidatorIndex];\n  }\n}\nexport function shouldHidePlaceholder({\n  floatingPlaceholder,\n  hint,\n  floatOnFocus\n}, isFocused) {\n  if (floatingPlaceholder) {\n    if (hint && isFocused) {\n      return !floatOnFocus;\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\nexport function shouldPlaceholderFloat({\n  defaultValue,\n  floatOnFocus\n}, isFocused, hasValue, value) {\n  const useDefaultValue = !_isEmpty(defaultValue) && value === undefined; // To consider a user that has deleted the defaultValue (and then the placeholder should un-float when losing focus)\n  return floatOnFocus && isFocused || hasValue || useDefaultValue;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}