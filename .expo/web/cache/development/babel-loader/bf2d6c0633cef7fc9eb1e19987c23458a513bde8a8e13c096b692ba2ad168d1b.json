{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport LayoutAnimation from \"react-native-web/dist/exports/LayoutAnimation\";\nimport { Colors } from \"../../style\";\nimport View from \"../view\";\nimport TouchableOpacity from \"../touchableOpacity\";\nimport Button, { ButtonSize } from \"../button\";\nimport Card from \"../card\";\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar PEEP = 8;\nvar DURATION = 300;\nvar MARGIN_BOTTOM = 24;\nvar buttonStartValue = 0.8;\nvar icon = require(\"./assets/arrow-down.png\");\nvar StackAggregator = function StackAggregator(props) {\n  var children = props.children,\n    containerStyle = props.containerStyle,\n    buttonProps = props.buttonProps,\n    _props$collapsed = props.collapsed,\n    collapsed = _props$collapsed === void 0 ? true : _props$collapsed,\n    disablePresses = props.disablePresses,\n    onItemPress = props.onItemPress,\n    contentContainerStyle = props.contentContainerStyle,\n    itemBorderRadius = props.itemBorderRadius,\n    onCollapseWillChange = props.onCollapseWillChange,\n    onCollapseChanged = props.onCollapseChanged;\n  var itemsCount = React.Children.count(children);\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    firstItemHeight = _useState2[0],\n    setFirstItemHeight = _useState2[1];\n  var _useState3 = useState(collapsed),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isCollapsed = _useState4[0],\n    setIsCollapsed = _useState4[1];\n  useEffect(function () {\n    setIsCollapsed(collapsed);\n  }, [collapsed]);\n  useDidUpdate(function () {\n    onCollapseWillChange == null ? void 0 : onCollapseWillChange(isCollapsed);\n    animate();\n    onCollapseChanged == null ? void 0 : onCollapseChanged(isCollapsed);\n  }, [isCollapsed, onCollapseWillChange, onCollapseChanged]);\n  var animatedScale = new Animated.Value(isCollapsed ? buttonStartValue : 1);\n  var animatedOpacity = new Animated.Value(isCollapsed ? buttonStartValue : 1);\n  var animatedContentOpacity = useMemo(function () {\n    return new Animated.Value(isCollapsed ? 0 : 1);\n  }, [isCollapsed]);\n  var easeOut = Easing.bezier(0, 0, 0.58, 1);\n  var getItemScale = useCallback(function (index) {\n    if (isCollapsed) {\n      if (index === itemsCount - 2) {\n        return 0.95;\n      }\n      if (index === itemsCount - 1) {\n        return 0.9;\n      }\n    }\n    return 1;\n  }, [isCollapsed, itemsCount]);\n  var getAnimatedScales = useCallback(function () {\n    return React.Children.map(children, function (_item, index) {\n      return new Animated.Value(getItemScale(index));\n    });\n  }, [children, getItemScale]);\n  var animatedScaleArray = useMemo(function () {\n    return getAnimatedScales();\n  }, [getAnimatedScales]);\n  var animate = function animate() {\n    return Promise.all([animateValues(), animateCards()]);\n  };\n  var animateValues = function animateValues() {\n    var newValue = isCollapsed ? buttonStartValue : 1;\n    return new Promise(function (resolve) {\n      Animated.parallel([Animated.timing(animatedOpacity, {\n        duration: DURATION,\n        toValue: Number(newValue),\n        useNativeDriver: true\n      }), Animated.timing(animatedScale, {\n        toValue: Number(newValue),\n        easing: easeOut,\n        duration: DURATION,\n        useNativeDriver: true\n      }), Animated.timing(animatedContentOpacity, {\n        toValue: Number(isCollapsed ? 0 : 1),\n        easing: easeOut,\n        duration: DURATION,\n        useNativeDriver: true\n      })]).start(resolve);\n    });\n  };\n  var animateCards = function animateCards() {\n    var promises = [];\n    var _loop = function _loop(index) {\n      var newScale = getItemScale(index);\n      promises.push(new Promise(function (resolve) {\n        Animated.timing(animatedScaleArray[index], {\n          toValue: newScale,\n          easing: easeOut,\n          duration: DURATION,\n          useNativeDriver: true\n        }).start(resolve);\n      }));\n    };\n    for (var index = 0; index < itemsCount; index++) {\n      _loop(index);\n    }\n    return Promise.all(promises);\n  };\n  var close = function close() {\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n    setIsCollapsed(true);\n  };\n  var open = function open() {\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n    setIsCollapsed(false);\n  };\n  var getTop = function getTop(index) {\n    var start = 0;\n    if (index === itemsCount - 2) {\n      start += PEEP;\n    }\n    if (index === itemsCount - 1) {\n      start += PEEP * 2;\n    }\n    return start;\n  };\n  var getItemStyle = function getItemStyle(index) {\n    if (isCollapsed) {\n      return {\n        position: index !== 0 ? 'absolute' : undefined,\n        top: getTop(index)\n      };\n    }\n    return {\n      marginBottom: MARGIN_BOTTOM,\n      marginTop: index === 0 ? 40 : undefined\n    };\n  };\n  var touchableOpacityStyle = useMemo(function () {\n    return [styles.touchable, {\n      height: firstItemHeight ? firstItemHeight + PEEP * 2 : undefined,\n      zIndex: itemsCount\n    }];\n  }, [firstItemHeight, itemsCount]);\n  var _onItemPress = function _onItemPress(index) {\n    if (!disablePresses) {\n      onItemPress == null ? void 0 : onItemPress(index);\n    }\n  };\n  var onLayout = function onLayout(event) {\n    var height = event.nativeEvent.layout.height;\n    if (height) {\n      setFirstItemHeight(height);\n    }\n  };\n  var renderItem = function renderItem(item, index) {\n    return _jsx(Animated.View, {\n      onLayout: index === 0 ? onLayout : undefined,\n      style: [Constants.isIOS && styles.containerShadow, contentContainerStyle, getItemStyle(index), {\n        borderRadius: Constants.isIOS ? itemBorderRadius : undefined,\n        alignSelf: 'center',\n        zIndex: itemsCount - index,\n        transform: [{\n          scaleX: animatedScaleArray[index]\n        }],\n        width: Constants.windowWidth - 40,\n        height: isCollapsed ? firstItemHeight : undefined\n      }],\n      collapsable: false,\n      children: _jsx(Card, {\n        style: styles.card,\n        onPress: function onPress() {\n          return _onItemPress(index);\n        },\n        borderRadius: itemBorderRadius,\n        elevation: 5,\n        children: _jsx(Animated.View, {\n          style: index !== 0 ? {\n            opacity: animatedContentOpacity\n          } : undefined,\n          collapsable: false,\n          children: item\n        })\n      })\n    });\n  };\n  return _jsx(View, {\n    style: containerStyle,\n    children: _jsxs(View, {\n      style: styles.subContainer,\n      children: [_jsx(Animated.View, {\n        style: {\n          position: 'absolute',\n          right: 0,\n          opacity: animatedOpacity,\n          transform: [{\n            scale: animatedScale\n          }]\n        },\n        children: _jsx(Button, _objectSpread(_objectSpread({\n          label: 'Show less',\n          iconSource: icon,\n          link: true,\n          size: ButtonSize.small\n        }, buttonProps), {}, {\n          \"marginH-24\": true,\n          \"marginB-20\": true,\n          onPress: close,\n          style: styles.button\n        }))\n      }), React.Children.map(children, function (item, index) {\n        return renderItem(item, index);\n      }), isCollapsed && _jsx(TouchableOpacity, {\n        onPress: open,\n        activeOpacity: 1,\n        style: touchableOpacityStyle\n      })]\n    })\n  });\n};\nexport default asBaseComponent(StackAggregator);\nStackAggregator.displayName = 'StackAggregator';\nStackAggregator.defaultProps = {\n  collapsed: true,\n  disablePresses: false,\n  itemBorderRadius: 0\n};\nvar styles = StyleSheet.create({\n  subContainer: {\n    marginBottom: PEEP * 3\n  },\n  touchable: {\n    position: 'absolute',\n    width: '100%'\n  },\n  containerShadow: {\n    backgroundColor: Colors.white,\n    shadowColor: Colors.grey40,\n    shadowOpacity: 0.25,\n    shadowRadius: 12,\n    shadowOffset: {\n      height: 5,\n      width: 0\n    }\n  },\n  card: {\n    overflow: 'hidden',\n    flexShrink: 1,\n    backgroundColor: 'transparent'\n  },\n  button: {\n    zIndex: 100\n  }\n});","map":{"version":3,"names":["React","useState","useMemo","useCallback","useEffect","StyleSheet","Animated","Easing","LayoutAnimation","Colors","View","TouchableOpacity","Button","ButtonSize","Card","Constants","asBaseComponent","useDidUpdate","jsx","_jsx","jsxs","_jsxs","PEEP","DURATION","MARGIN_BOTTOM","buttonStartValue","icon","require","StackAggregator","props","children","containerStyle","buttonProps","_props$collapsed","collapsed","disablePresses","onItemPress","contentContainerStyle","itemBorderRadius","onCollapseWillChange","onCollapseChanged","itemsCount","Children","count","_useState","_useState2","_slicedToArray","firstItemHeight","setFirstItemHeight","_useState3","_useState4","isCollapsed","setIsCollapsed","animate","animatedScale","Value","animatedOpacity","animatedContentOpacity","easeOut","bezier","getItemScale","index","getAnimatedScales","map","_item","animatedScaleArray","Promise","all","animateValues","animateCards","newValue","resolve","parallel","timing","duration","toValue","Number","useNativeDriver","easing","start","promises","_loop","newScale","push","close","configureNext","Presets","easeInEaseOut","open","getTop","getItemStyle","position","undefined","top","marginBottom","marginTop","touchableOpacityStyle","styles","touchable","height","zIndex","_onItemPress","onLayout","event","nativeEvent","layout","renderItem","item","style","isIOS","containerShadow","borderRadius","alignSelf","transform","scaleX","width","windowWidth","collapsable","card","onPress","elevation","opacity","subContainer","right","scale","_objectSpread","label","iconSource","link","size","small","button","activeOpacity","displayName","defaultProps","create","backgroundColor","white","shadowColor","grey40","shadowOpacity","shadowRadius","shadowOffset","overflow","flexShrink"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/stackAggregator/index.js"],"sourcesContent":["import React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { StyleSheet, Animated, Easing, LayoutAnimation } from 'react-native';\nimport { Colors } from \"../../style\";\nimport View from \"../view\";\nimport TouchableOpacity from \"../touchableOpacity\";\nimport Button, { ButtonSize } from \"../button\";\nimport Card from \"../card\";\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport { useDidUpdate } from \"../../hooks\";\nconst PEEP = 8;\nconst DURATION = 300;\nconst MARGIN_BOTTOM = 24;\nconst buttonStartValue = 0.8;\nconst icon = require(\"./assets/arrow-down.png\");\n/**\n * @description: Stack aggregator component\n * @modifiers: margin, padding\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/StackAggregatorScreen.tsx\n */\nconst StackAggregator = props => {\n  const {\n    children,\n    containerStyle,\n    buttonProps,\n    collapsed = true,\n    disablePresses,\n    onItemPress,\n    contentContainerStyle,\n    itemBorderRadius,\n    onCollapseWillChange,\n    onCollapseChanged\n  } = props;\n  const itemsCount = React.Children.count(children);\n  const [firstItemHeight, setFirstItemHeight] = useState();\n  const [isCollapsed, setIsCollapsed] = useState(collapsed);\n  useEffect(() => {\n    setIsCollapsed(collapsed);\n  }, [collapsed]);\n  useDidUpdate(() => {\n    onCollapseWillChange?.(isCollapsed);\n    animate();\n    onCollapseChanged?.(isCollapsed);\n  }, [isCollapsed, onCollapseWillChange, onCollapseChanged]);\n\n  /** Animations */\n\n  const animatedScale = new Animated.Value(isCollapsed ? buttonStartValue : 1);\n  const animatedOpacity = new Animated.Value(isCollapsed ? buttonStartValue : 1);\n  const animatedContentOpacity = useMemo(() => {\n    return new Animated.Value(isCollapsed ? 0 : 1);\n  }, [isCollapsed]);\n  const easeOut = Easing.bezier(0, 0, 0.58, 1);\n  const getItemScale = useCallback(index => {\n    if (isCollapsed) {\n      if (index === itemsCount - 2) {\n        return 0.95;\n      }\n      if (index === itemsCount - 1) {\n        return 0.9;\n      }\n    }\n    return 1;\n  }, [isCollapsed, itemsCount]);\n  const getAnimatedScales = useCallback(() => {\n    return React.Children.map(children, (_item, index) => {\n      return new Animated.Value(getItemScale(index));\n    });\n  }, [children, getItemScale]);\n  const animatedScaleArray = useMemo(() => {\n    return getAnimatedScales();\n  }, [getAnimatedScales]);\n  const animate = () => {\n    return Promise.all([animateValues(), animateCards()]);\n  };\n  const animateValues = () => {\n    const newValue = isCollapsed ? buttonStartValue : 1;\n    return new Promise(resolve => {\n      Animated.parallel([Animated.timing(animatedOpacity, {\n        duration: DURATION,\n        toValue: Number(newValue),\n        useNativeDriver: true\n      }), Animated.timing(animatedScale, {\n        toValue: Number(newValue),\n        easing: easeOut,\n        duration: DURATION,\n        useNativeDriver: true\n      }), Animated.timing(animatedContentOpacity, {\n        toValue: Number(isCollapsed ? 0 : 1),\n        easing: easeOut,\n        duration: DURATION,\n        useNativeDriver: true\n      })]).start(resolve);\n    });\n  };\n  const animateCards = () => {\n    const promises = [];\n    for (let index = 0; index < itemsCount; index++) {\n      const newScale = getItemScale(index);\n      promises.push(new Promise(resolve => {\n        Animated.timing(animatedScaleArray[index], {\n          toValue: newScale,\n          easing: easeOut,\n          duration: DURATION,\n          useNativeDriver: true\n        }).start(resolve);\n      }));\n    }\n    return Promise.all(promises);\n  };\n\n  /** Actions */\n\n  const close = () => {\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n    setIsCollapsed(true);\n  };\n  const open = () => {\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n    setIsCollapsed(false);\n  };\n\n  /** Styles */\n\n  const getTop = index => {\n    let start = 0;\n    if (index === itemsCount - 2) {\n      start += PEEP;\n    }\n    if (index === itemsCount - 1) {\n      start += PEEP * 2;\n    }\n    return start;\n  };\n  const getItemStyle = index => {\n    if (isCollapsed) {\n      return {\n        position: index !== 0 ? 'absolute' : undefined,\n        top: getTop(index)\n      };\n    }\n    return {\n      marginBottom: MARGIN_BOTTOM,\n      marginTop: index === 0 ? 40 : undefined\n    };\n  };\n  const touchableOpacityStyle = useMemo(() => {\n    return [styles.touchable, {\n      height: firstItemHeight ? firstItemHeight + PEEP * 2 : undefined,\n      zIndex: itemsCount\n    }];\n  }, [firstItemHeight, itemsCount]);\n\n  /** Events */\n\n  const _onItemPress = index => {\n    if (!disablePresses) {\n      onItemPress?.(index);\n    }\n  };\n  const onLayout = event => {\n    const height = event.nativeEvent.layout.height;\n    if (height) {\n      setFirstItemHeight(height);\n    }\n  };\n\n  /** Renders */\n\n  const renderItem = (item, index) => {\n    return <Animated.View onLayout={index === 0 ? onLayout : undefined} style={[Constants.isIOS && styles.containerShadow, contentContainerStyle,\n    //@ts-expect-error 'position' doesn't match AnimatedInterpolation type\n    getItemStyle(index), {\n      borderRadius: Constants.isIOS ? itemBorderRadius : undefined,\n      alignSelf: 'center',\n      zIndex: itemsCount - index,\n      transform: [{\n        scaleX: animatedScaleArray[index]\n      }],\n      width: Constants.windowWidth - 40,\n      height: isCollapsed ? firstItemHeight : undefined\n    }]} collapsable={false}>\n        <Card style={styles.card} onPress={() => _onItemPress(index)} borderRadius={itemBorderRadius} elevation={5}>\n          <Animated.View style={index !== 0 ? {\n          opacity: animatedContentOpacity\n        } : undefined} collapsable={false}>\n            {item}\n          </Animated.View>\n        </Card>\n      </Animated.View>;\n  };\n  return <View style={containerStyle}>\n      <View style={styles.subContainer}>\n        <Animated.View style={{\n        position: 'absolute',\n        right: 0,\n        opacity: animatedOpacity,\n        transform: [{\n          scale: animatedScale\n        }]\n      }}>\n          <Button label={'Show less'} iconSource={icon} link size={ButtonSize.small} {...buttonProps} marginH-24 marginB-20 onPress={close} style={styles.button} />\n        </Animated.View>\n\n        {React.Children.map(children, (item, index) => {\n        return renderItem(item, index);\n      })}\n\n        {isCollapsed && <TouchableOpacity onPress={open} activeOpacity={1} style={touchableOpacityStyle} />}\n      </View>\n    </View>;\n};\nexport default asBaseComponent(StackAggregator);\nStackAggregator.displayName = 'StackAggregator';\nStackAggregator.defaultProps = {\n  collapsed: true,\n  disablePresses: false,\n  itemBorderRadius: 0\n};\nconst styles = StyleSheet.create({\n  subContainer: {\n    marginBottom: PEEP * 3\n  },\n  touchable: {\n    position: 'absolute',\n    width: '100%'\n  },\n  containerShadow: {\n    backgroundColor: Colors.white,\n    shadowColor: Colors.grey40,\n    shadowOpacity: 0.25,\n    shadowRadius: 12,\n    shadowOffset: {\n      height: 5,\n      width: 0\n    }\n  },\n  card: {\n    overflow: 'hidden',\n    flexShrink: 1,\n    backgroundColor: 'transparent'\n  },\n  button: {\n    zIndex: 100\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}