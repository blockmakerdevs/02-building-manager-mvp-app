{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"chips\", \"defaultChipProps\", \"invalidChipProps\", \"leadingAccessory\", \"onChange\", \"fieldStyle\", \"maxChips\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport _map from \"lodash/map\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport React, { useCallback, useMemo, useRef, useState, forwardRef } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Constants } from \"../../commons/new\";\nimport { useCombinedRefs } from \"../../hooks\";\nimport TextField from \"../textField\";\nimport Chip from \"../chip\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar removeIcon = require(\"./assets/xSmall.png\");\nexport var ChipsInputChangeReason = function (ChipsInputChangeReason) {\n  ChipsInputChangeReason[\"Added\"] = \"added\";\n  ChipsInputChangeReason[\"Removed\"] = \"removed\";\n  return ChipsInputChangeReason;\n}({});\nvar ChipsInput = forwardRef(function (props, refToForward) {\n  var fieldRef = useCombinedRefs(refToForward);\n  var _props$chips = props.chips,\n    chips = _props$chips === void 0 ? [] : _props$chips,\n    defaultChipProps = props.defaultChipProps,\n    invalidChipProps = props.invalidChipProps,\n    leadingAccessory = props.leadingAccessory,\n    onChange = props.onChange,\n    fieldStyle = props.fieldStyle,\n    maxChips = props.maxChips,\n    others = _objectWithoutProperties(props, _excluded);\n  var _useState = useState(undefined),\n    _useState2 = _slicedToArray(_useState, 2),\n    markedForRemoval = _useState2[0],\n    setMarkedForRemoval = _useState2[1];\n  var fieldValue = useRef(others.value);\n  var addChip = useCallback(function () {\n    var reachedMaximum = maxChips && (chips == null ? void 0 : chips.length) >= maxChips;\n    if (fieldValue.current && !reachedMaximum) {\n      var newChip = {\n        label: fieldValue.current\n      };\n      setMarkedForRemoval(undefined);\n      fieldRef.current.clear();\n      fieldValue.current = '';\n      setTimeout(function () {\n        onChange == null ? void 0 : onChange([].concat(_toConsumableArray(chips), [newChip]), ChipsInputChangeReason.Added, newChip);\n      }, 0);\n    }\n  }, [onChange, chips, maxChips]);\n  var removeMarkedChip = useCallback(function () {\n    if (!_isUndefined(markedForRemoval)) {\n      var removedChip = chips == null ? void 0 : chips.splice(markedForRemoval, 1);\n      onChange == null ? void 0 : onChange(_toConsumableArray(chips), ChipsInputChangeReason.Removed, removedChip == null ? void 0 : removedChip[0]);\n      setMarkedForRemoval(undefined);\n    }\n  }, [chips, markedForRemoval, onChange]);\n  var onChipPress = useCallback(function (_ref) {\n    var index = _ref.customValue;\n    var selectedChip = chips[index];\n    selectedChip == null ? void 0 : selectedChip.onPress == null ? void 0 : selectedChip.onPress();\n    setMarkedForRemoval(index);\n  }, [chips]);\n  var onChangeText = useCallback(function (value) {\n    fieldValue.current = value;\n    props.onChangeText == null ? void 0 : props.onChangeText(value);\n    if (!_isUndefined(markedForRemoval)) {\n      setMarkedForRemoval(undefined);\n    }\n  }, [props.onChangeText, markedForRemoval]);\n  var onKeyPress = useCallback(function (event) {\n    var _event$nativeEvent;\n    props.onKeyPress == null ? void 0 : props.onKeyPress(event);\n    var keyCode = event == null ? void 0 : (_event$nativeEvent = event.nativeEvent) == null ? void 0 : _event$nativeEvent.key;\n    var pressedBackspace = keyCode === Constants.backspaceKey;\n    if (pressedBackspace && !fieldValue.current && chips.length > 0) {\n      if (_isUndefined(markedForRemoval) || markedForRemoval !== chips.length - 1) {\n        setMarkedForRemoval(chips.length - 1);\n      } else {\n        removeMarkedChip();\n      }\n    }\n  }, [chips, props.onKeyPress, markedForRemoval, removeMarkedChip]);\n  var chipList = useMemo(function () {\n    return _jsxs(_Fragment, {\n      children: [leadingAccessory, _map(chips, function (chip, index) {\n        var isMarkedForRemoval = index === markedForRemoval;\n        return _jsx(Chip, _objectSpread(_objectSpread(_objectSpread(_objectSpread({\n          customValue: index,\n          \"marginR-s2\": true,\n          \"marginB-s2\": true,\n          dismissIcon: removeIcon,\n          recorderTag: 'mask'\n        }, defaultChipProps), chip.invalid ? invalidChipProps : undefined), chip), {}, {\n          onPress: onChipPress,\n          onDismiss: isMarkedForRemoval ? removeMarkedChip : undefined\n        }), index);\n      })]\n    });\n  }, [chips, leadingAccessory, defaultChipProps, removeMarkedChip, markedForRemoval]);\n  return _jsx(TextField, _objectSpread(_objectSpread({\n    ref: fieldRef,\n    leadingAccessory: chipList,\n    blurOnSubmit: false,\n    style: styles.input\n  }, others), {}, {\n    onChangeText: onChangeText,\n    onSubmitEditing: addChip,\n    fieldStyle: [fieldStyle, styles.fieldStyle],\n    onKeyPress: onKeyPress,\n    accessibilityHint: props.editable ? 'press keyboard delete button to remove last tag' : undefined\n  }));\n});\nvar styles = StyleSheet.create({\n  fieldStyle: {\n    flexWrap: 'wrap'\n  },\n  input: {\n    flexGrow: undefined\n  }\n});\nChipsInput.changeReasons = {\n  ADDED: 'added',\n  REMOVED: 'removed'\n};\nexport default ChipsInput;","map":{"version":3,"names":["_map","_isUndefined","React","useCallback","useMemo","useRef","useState","forwardRef","StyleSheet","Constants","useCombinedRefs","TextField","Chip","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","removeIcon","require","ChipsInputChangeReason","ChipsInput","props","refToForward","fieldRef","_props$chips","chips","defaultChipProps","invalidChipProps","leadingAccessory","onChange","fieldStyle","maxChips","others","_objectWithoutProperties","_excluded","_useState","undefined","_useState2","_slicedToArray","markedForRemoval","setMarkedForRemoval","fieldValue","value","addChip","reachedMaximum","length","current","newChip","label","clear","setTimeout","concat","_toConsumableArray","Added","removeMarkedChip","removedChip","splice","Removed","onChipPress","_ref","index","customValue","selectedChip","onPress","onChangeText","onKeyPress","event","_event$nativeEvent","keyCode","nativeEvent","key","pressedBackspace","backspaceKey","chipList","children","chip","isMarkedForRemoval","_objectSpread","dismissIcon","recorderTag","invalid","onDismiss","ref","blurOnSubmit","style","styles","input","onSubmitEditing","accessibilityHint","editable","create","flexWrap","flexGrow","changeReasons","ADDED","REMOVED"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/chipsInput/index.js"],"sourcesContent":["import _map from \"lodash/map\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport React, { useCallback, useMemo, useRef, useState, forwardRef } from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Constants } from \"../../commons/new\";\nimport { useCombinedRefs } from \"../../hooks\";\nimport TextField from \"../textField\";\nimport Chip from \"../chip\";\nconst removeIcon = require(\"./assets/xSmall.png\");\nexport let ChipsInputChangeReason = /*#__PURE__*/function (ChipsInputChangeReason) {\n  ChipsInputChangeReason[\"Added\"] = \"added\";\n  ChipsInputChangeReason[\"Removed\"] = \"removed\";\n  return ChipsInputChangeReason;\n}({});\nconst ChipsInput = forwardRef((props, refToForward) => {\n  const fieldRef = useCombinedRefs(refToForward);\n  const {\n    chips = [],\n    defaultChipProps,\n    invalidChipProps,\n    leadingAccessory,\n    onChange,\n    fieldStyle,\n    maxChips,\n    ...others\n  } = props;\n  const [markedForRemoval, setMarkedForRemoval] = useState(undefined);\n  const fieldValue = useRef(others.value);\n  const addChip = useCallback(() => {\n    const reachedMaximum = maxChips && chips?.length >= maxChips;\n    if (fieldValue.current && !reachedMaximum) {\n      const newChip = {\n        label: fieldValue.current\n      };\n      setMarkedForRemoval(undefined);\n      // @ts-expect-error\n      fieldRef.current.clear();\n      fieldValue.current = '';\n      /* NOTE: Delay change event to give clear field time to complete and avoid a flickering */\n      setTimeout(() => {\n        onChange?.([...chips, newChip], ChipsInputChangeReason.Added, newChip);\n      }, 0);\n    }\n  }, [onChange, chips, maxChips]);\n  const removeMarkedChip = useCallback(() => {\n    if (!_isUndefined(markedForRemoval)) {\n      const removedChip = chips?.splice(markedForRemoval, 1);\n      onChange?.([...chips], ChipsInputChangeReason.Removed, removedChip?.[0]);\n      setMarkedForRemoval(undefined);\n    }\n  }, [chips, markedForRemoval, onChange]);\n  const onChipPress = useCallback(({\n    customValue: index\n  }) => {\n    const selectedChip = chips[index];\n    selectedChip?.onPress?.();\n    setMarkedForRemoval(index);\n  }, [chips]);\n  const onChangeText = useCallback(value => {\n    fieldValue.current = value;\n    props.onChangeText?.(value);\n    if (!_isUndefined(markedForRemoval)) {\n      setMarkedForRemoval(undefined);\n    }\n  }, [props.onChangeText, markedForRemoval]);\n  const onKeyPress = useCallback(event => {\n    props.onKeyPress?.(event);\n    const keyCode = event?.nativeEvent?.key;\n    const pressedBackspace = keyCode === Constants.backspaceKey;\n    if (pressedBackspace && !fieldValue.current && chips.length > 0) {\n      if (_isUndefined(markedForRemoval) || markedForRemoval !== chips.length - 1) {\n        setMarkedForRemoval(chips.length - 1);\n      } else {\n        removeMarkedChip();\n      }\n    }\n  }, [chips, props.onKeyPress, markedForRemoval, removeMarkedChip]);\n  const chipList = useMemo(() => {\n    return <>\n        {leadingAccessory}\n        {_map(chips, (chip, index) => {\n        const isMarkedForRemoval = index === markedForRemoval;\n        return <Chip key={index} customValue={index}\n        // resetSpacings\n        // paddingH-s2\n        marginR-s2 marginB-s2 dismissIcon={removeIcon} recorderTag={'mask'} {...defaultChipProps} {...chip.invalid ? invalidChipProps : undefined} {...chip} onPress={onChipPress} onDismiss={isMarkedForRemoval ? removeMarkedChip : undefined} />;\n      })}\n      </>;\n  }, [chips, leadingAccessory, defaultChipProps, removeMarkedChip, markedForRemoval]);\n  return <TextField\n  // @ts-expect-error\n  ref={fieldRef} leadingAccessory={chipList} blurOnSubmit={false} style={styles.input} {...others} onChangeText={onChangeText} onSubmitEditing={addChip} fieldStyle={[fieldStyle, styles.fieldStyle]} onKeyPress={onKeyPress} accessibilityHint={props.editable ? 'press keyboard delete button to remove last tag' : undefined} />;\n});\nconst styles = StyleSheet.create({\n  fieldStyle: {\n    flexWrap: 'wrap'\n  },\n  input: {\n    flexGrow: undefined\n  }\n});\n// @ts-expect-error\nChipsInput.changeReasons = {\n  ADDED: 'added',\n  REMOVED: 'removed'\n};\nexport default ChipsInput;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}