{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { useSharedValue, useAnimatedReaction, runOnJS } from 'react-native-reanimated';\nimport { FlashListPackage } from \"../../optionalDependencies\";\nimport { Constants } from \"../../commons/new\";\nimport { generateMonthItems } from \"./helpers/CalendarProcessor\";\nimport { addHeaders } from \"./helpers/DataProcessor\";\nimport { isSameMonth, getDateObject } from \"./helpers/DateUtils\";\nimport { FirstDayOfWeek, UpdateSource } from \"./types\";\nimport CalendarContext from \"./CalendarContext\";\nimport CalendarItem from \"./CalendarItem\";\nimport Agenda from \"./Agenda\";\nimport TodayButton from \"./TodayButton\";\nimport Header from \"./Header\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar FlashList = FlashListPackage == null ? void 0 : FlashListPackage.FlashList;\nvar VIEWABILITY_CONFIG = {\n  itemVisiblePercentThreshold: 95,\n  minimumViewTime: 200\n};\nvar YEARS_RANGE = 1;\nvar PAGE_RELOAD_THRESHOLD = 3;\nvar NOW = Date.now();\nfunction Calendar(props) {\n  var data = props.data,\n    children = props.children,\n    _props$initialDate = props.initialDate,\n    initialDate = _props$initialDate === void 0 ? NOW : _props$initialDate,\n    onChangeDate = props.onChangeDate,\n    _props$firstDayOfWeek = props.firstDayOfWeek,\n    firstDayOfWeek = _props$firstDayOfWeek === void 0 ? FirstDayOfWeek.MONDAY : _props$firstDayOfWeek,\n    _props$staticHeader = props.staticHeader,\n    staticHeader = _props$staticHeader === void 0 ? false : _props$staticHeader,\n    _props$showExtraDays = props.showExtraDays,\n    showExtraDays = _props$showExtraDays === void 0 ? true : _props$showExtraDays;\n  var _useState = useState(function () {\n      return generateMonthItems(initialDate, YEARS_RANGE, YEARS_RANGE);\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    items = _useState2[0];\n  var getItemIndex = useCallback(function (date) {\n    'worklet';\n\n    var dateObject = getDateObject(date);\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].month === dateObject.month && items[i].year === dateObject.year) {\n        return i;\n      }\n    }\n    return -1;\n  }, [items]);\n  var flashListRef = useRef();\n  var current = useSharedValue(initialDate);\n  var initialMonthIndex = useRef(getItemIndex(current.value));\n  var lastUpdateSource = useSharedValue(UpdateSource.INIT);\n  var processedData = useMemo(function () {\n    return addHeaders(data);\n  }, [data]);\n  var scrolledByUser = useSharedValue(false);\n  var headerHeight = useSharedValue(0);\n  var setDate = useCallback(function (date, updateSource) {\n    current.value = date;\n    lastUpdateSource.value = updateSource;\n    if (updateSource !== UpdateSource.PROP_UPDATE) {\n      onChangeDate == null ? void 0 : onChangeDate(date);\n    }\n  }, []);\n  var scrollToIndex = useCallback(function (index) {\n    var _flashListRef$current;\n    scrolledByUser.value = false;\n    (_flashListRef$current = flashListRef.current) == null ? void 0 : _flashListRef$current.scrollToIndex({\n      index: index,\n      animated: true\n    });\n  }, [getItemIndex]);\n  useDidUpdate(function () {\n    setDate(initialDate, UpdateSource.PROP_UPDATE);\n  }, [initialDate]);\n  useDidUpdate(function () {\n    console.log('Update items');\n    var index = getItemIndex(current.value);\n    scrollToIndex(index);\n  }, [items, getItemIndex]);\n  var setHeaderHeight = useCallback(function (height) {\n    headerHeight.value = height;\n  }, []);\n  var contextValue = useMemo(function () {\n    return {\n      data: processedData,\n      firstDayOfWeek: firstDayOfWeek,\n      selectedDate: current,\n      setDate: setDate,\n      showWeeksNumbers: true,\n      showExtraDays: showExtraDays,\n      updateSource: lastUpdateSource,\n      staticHeader: staticHeader,\n      setHeaderHeight: setHeaderHeight,\n      headerHeight: headerHeight,\n      today: NOW\n    };\n  }, [processedData, staticHeader, showExtraDays, firstDayOfWeek]);\n  var addPages = useCallback(function () {}, [items]);\n  var shouldAddPages = useCallback(function (index) {\n    'worklet';\n\n    return index !== -1 && (index < PAGE_RELOAD_THRESHOLD || index > items.length - PAGE_RELOAD_THRESHOLD);\n  }, [items]);\n  useAnimatedReaction(function () {\n    return current.value;\n  }, function (selected, previous) {\n    var index = getItemIndex(selected);\n    if (shouldAddPages(index)) {\n      console.log('Add new pages: ', index, items.length);\n      runOnJS(addPages)();\n    } else if (lastUpdateSource.value !== UpdateSource.MONTH_SCROLL) {\n      if (previous && !isSameMonth(selected, previous)) {\n        runOnJS(scrollToIndex)(index);\n      }\n    }\n  }, [getItemIndex]);\n  var onViewableItemsChanged = useCallback(function (_ref) {\n    var _viewableItems$;\n    var viewableItems = _ref.viewableItems;\n    var item = viewableItems == null ? void 0 : (_viewableItems$ = viewableItems[0]) == null ? void 0 : _viewableItems$.item;\n    if (item && scrolledByUser.value) {\n      if (!isSameMonth(item, current.value)) {\n        var newDate = getDateObject({\n          year: item.year,\n          month: item.month,\n          day: 1\n        }).timestamp;\n        setDate(newDate, UpdateSource.MONTH_SCROLL);\n      }\n    }\n  }, []);\n  var onMomentumScrollBegin = useCallback(function () {\n    scrolledByUser.value = true;\n  }, []);\n  var onScrollBeginDrag = useCallback(function () {\n    scrolledByUser.value = true;\n  }, []);\n  var renderCalendarItem = useCallback(function (_ref2) {\n    var item = _ref2.item;\n    if (!staticHeader || headerHeight.value) {\n      return _jsx(CalendarItem, {\n        year: item.year,\n        month: item.month\n      });\n    }\n  }, []);\n  return _jsxs(CalendarContext.Provider, {\n    value: contextValue,\n    children: [staticHeader && _jsx(Header, {}), _jsx(FlashList, {\n      ref: flashListRef,\n      estimatedItemSize: Constants.screenWidth,\n      data: items,\n      initialScrollIndex: initialMonthIndex.current,\n      estimatedFirstItemOffset: 0,\n      renderItem: renderCalendarItem,\n      horizontal: true,\n      pagingEnabled: true,\n      showsHorizontalScrollIndicator: false,\n      onViewableItemsChanged: onViewableItemsChanged,\n      viewabilityConfig: VIEWABILITY_CONFIG,\n      onMomentumScrollBegin: onMomentumScrollBegin,\n      onScrollBeginDrag: onScrollBeginDrag\n    }), children, _jsx(TodayButton, {})]\n  });\n}\nCalendar.Agenda = Agenda;\nexport default Calendar;","map":{"version":3,"names":["React","useCallback","useMemo","useRef","useState","useSharedValue","useAnimatedReaction","runOnJS","FlashListPackage","Constants","generateMonthItems","addHeaders","isSameMonth","getDateObject","FirstDayOfWeek","UpdateSource","CalendarContext","CalendarItem","Agenda","TodayButton","Header","useDidUpdate","jsx","_jsx","jsxs","_jsxs","FlashList","VIEWABILITY_CONFIG","itemVisiblePercentThreshold","minimumViewTime","YEARS_RANGE","PAGE_RELOAD_THRESHOLD","NOW","Date","now","Calendar","props","data","children","_props$initialDate","initialDate","onChangeDate","_props$firstDayOfWeek","firstDayOfWeek","MONDAY","_props$staticHeader","staticHeader","_props$showExtraDays","showExtraDays","_useState","_useState2","_slicedToArray","items","getItemIndex","date","dateObject","i","length","month","year","flashListRef","current","initialMonthIndex","value","lastUpdateSource","INIT","processedData","scrolledByUser","headerHeight","setDate","updateSource","PROP_UPDATE","scrollToIndex","index","_flashListRef$current","animated","console","log","setHeaderHeight","height","contextValue","selectedDate","showWeeksNumbers","today","addPages","shouldAddPages","selected","previous","MONTH_SCROLL","onViewableItemsChanged","_ref","_viewableItems$","viewableItems","item","newDate","day","timestamp","onMomentumScrollBegin","onScrollBeginDrag","renderCalendarItem","_ref2","Provider","ref","estimatedItemSize","screenWidth","initialScrollIndex","estimatedFirstItemOffset","renderItem","horizontal","pagingEnabled","showsHorizontalScrollIndicator","viewabilityConfig"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/incubator/Calendar/index.js"],"sourcesContent":["import React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { useSharedValue, useAnimatedReaction, runOnJS } from 'react-native-reanimated';\nimport { FlashListPackage } from \"../../optionalDependencies\";\nimport { Constants } from \"../../commons/new\";\nimport { generateMonthItems } from \"./helpers/CalendarProcessor\";\nimport { addHeaders } from \"./helpers/DataProcessor\";\nimport { isSameMonth, /* addYears, */getDateObject } from \"./helpers/DateUtils\";\nimport { FirstDayOfWeek, UpdateSource } from \"./types\";\nimport CalendarContext from \"./CalendarContext\";\nimport CalendarItem from \"./CalendarItem\";\nimport Agenda from \"./Agenda\";\nimport TodayButton from \"./TodayButton\";\nimport Header from \"./Header\";\nimport { useDidUpdate } from \"../../hooks\";\nconst FlashList = FlashListPackage?.FlashList;\nconst VIEWABILITY_CONFIG = {\n  itemVisiblePercentThreshold: 95,\n  minimumViewTime: 200\n};\nconst YEARS_RANGE = 1;\nconst PAGE_RELOAD_THRESHOLD = 3;\nconst NOW = Date.now(); // so the 'initialDate' effect won't get called since the now different on every rerender\n\nfunction Calendar(props) {\n  const {\n    data,\n    children,\n    initialDate = NOW,\n    onChangeDate,\n    firstDayOfWeek = FirstDayOfWeek.MONDAY,\n    staticHeader = false,\n    showExtraDays = true\n  } = props;\n  const [items] = useState(() => generateMonthItems(initialDate, YEARS_RANGE, YEARS_RANGE));\n  const getItemIndex = useCallback(date => {\n    'worklet';\n\n    const dateObject = getDateObject(date);\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].month === dateObject.month && items[i].year === dateObject.year) {\n        return i;\n      }\n    }\n    return -1;\n  }, [items]);\n  const flashListRef = useRef();\n  const current = useSharedValue(initialDate);\n  const initialMonthIndex = useRef(getItemIndex(current.value));\n  const lastUpdateSource = useSharedValue(UpdateSource.INIT);\n  const processedData = useMemo(() => addHeaders(data), [data]);\n  const scrolledByUser = useSharedValue(false);\n  const headerHeight = useSharedValue(0);\n  const setDate = useCallback((date, updateSource) => {\n    current.value = date;\n    lastUpdateSource.value = updateSource;\n    if (updateSource !== UpdateSource.PROP_UPDATE) {\n      onChangeDate?.(date);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const scrollToIndex = useCallback(index => {\n    scrolledByUser.value = false;\n    // @ts-expect-error\n    flashListRef.current?.scrollToIndex({\n      index,\n      animated: true\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getItemIndex]);\n  useDidUpdate(() => {\n    setDate(initialDate, UpdateSource.PROP_UPDATE);\n  }, [initialDate]);\n  useDidUpdate(() => {\n    console.log('Update items');\n    const index = getItemIndex(current.value);\n    scrollToIndex(index);\n  }, [items, getItemIndex]);\n  const setHeaderHeight = useCallback(height => {\n    headerHeight.value = height;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const contextValue = useMemo(() => {\n    return {\n      data: processedData,\n      firstDayOfWeek,\n      selectedDate: current,\n      setDate,\n      showWeeksNumbers: true,\n      showExtraDays,\n      updateSource: lastUpdateSource,\n      staticHeader,\n      setHeaderHeight,\n      headerHeight,\n      today: NOW\n    };\n  }, [processedData, staticHeader, showExtraDays, firstDayOfWeek]);\n\n  /** Pages reload */\n\n  // const mergeArrays = (prepend: boolean, array: DateObjectWithOptionalDay[], newArray: DateObjectWithOptionalDay[]) => {\n  //   const arr: DateObjectWithOptionalDay[] = array.slice();\n  //   if (prepend) {\n  //     arr.unshift(...newArray);\n  //   } else {\n  //     arr.push(...newArray);\n  //   }\n  //   return arr;\n  // };\n\n  const addPages = useCallback(( /* index: number */\n  ) => {\n    // const prepend = index < PAGE_RELOAD_THRESHOLD;\n    // const append = index > items.length - PAGE_RELOAD_THRESHOLD;\n    // const pastRange = prepend ? YEARS_RANGE : 0;\n    // const futureRange = append ? YEARS_RANGE : 0;\n    // const newDate = addYears(current.value, prepend ? -1 : 1);\n    // const newItems = generateMonthItems(newDate, pastRange, futureRange);\n    // const newArray = mergeArrays(prepend, items, newItems);\n    // setItems(newArray);\n    // // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [items]);\n  const shouldAddPages = useCallback(index => {\n    'worklet';\n\n    return index !== -1 && (index < PAGE_RELOAD_THRESHOLD || index > items.length - PAGE_RELOAD_THRESHOLD);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [items]);\n  useAnimatedReaction(() => {\n    return current.value;\n  }, (selected, previous) => {\n    const index = getItemIndex(selected);\n    if (shouldAddPages(index)) {\n      console.log('Add new pages: ', index, items.length);\n      runOnJS(addPages)( /* index */);\n    } else if (lastUpdateSource.value !== UpdateSource.MONTH_SCROLL) {\n      if (previous && !isSameMonth(selected, previous)) {\n        runOnJS(scrollToIndex)(index);\n      }\n    }\n  }, [getItemIndex]);\n\n  /** Events */\n\n  // eslint-disable-next-line max-len\n  const onViewableItemsChanged = useCallback(({\n    viewableItems\n  }) => {\n    const item = viewableItems?.[0]?.item;\n    if (item && scrolledByUser.value) {\n      if (!isSameMonth(item, current.value)) {\n        const newDate = getDateObject({\n          year: item.year,\n          month: item.month,\n          day: 1\n        }).timestamp;\n        setDate(newDate, UpdateSource.MONTH_SCROLL);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const onMomentumScrollBegin = useCallback(() => {\n    scrolledByUser.value = true;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const onScrollBeginDrag = useCallback(() => {\n    scrolledByUser.value = true;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const renderCalendarItem = useCallback(({\n    item\n  }) => {\n    if (!staticHeader || headerHeight.value) {\n      // item is rendered before static header height is calculated so it leaves extra space\n      return <CalendarItem year={item.year} month={item.month} />;\n    }\n  }, []);\n  return <CalendarContext.Provider value={contextValue}>\n      {staticHeader && <Header />}\n      <FlashList ref={flashListRef} estimatedItemSize={Constants.screenWidth} data={items} initialScrollIndex={initialMonthIndex.current} estimatedFirstItemOffset={0} renderItem={renderCalendarItem} horizontal pagingEnabled showsHorizontalScrollIndicator={false}\n    // TODO: Consider moving this shared logic with Agenda to a hook\n    onViewableItemsChanged={onViewableItemsChanged} viewabilityConfig={VIEWABILITY_CONFIG} onMomentumScrollBegin={onMomentumScrollBegin} onScrollBeginDrag={onScrollBeginDrag} />\n      {children}\n      <TodayButton />\n    </CalendarContext.Provider>;\n}\nCalendar.Agenda = Agenda;\nexport default Calendar;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}