{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"renderItem\", \"onOrderChange\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport _mapKeys from \"lodash/mapKeys\";\nimport _map from \"lodash/map\";\nimport React, { useCallback } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport { useSharedValue } from 'react-native-reanimated';\nimport { useDidUpdate } from \"../../hooks\";\nimport SortableItem from \"./SortableItem\";\nimport usePresenter from \"./usePresenter\";\nimport { SortableGridListProps } from \"./types\";\nimport useGridLayout, { DEFAULT_ITEM_SPACINGS } from \"../gridList/useGridLayout\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction generateItemsOrder(data) {\n  return _map(data, function (item) {\n    return item.id;\n  });\n}\nfunction SortableGridList(props) {\n  var renderItem = props.renderItem,\n    onOrderChange = props.onOrderChange,\n    others = _objectWithoutProperties(props, _excluded);\n  var _useGridLayout = useGridLayout(props),\n    itemContainerStyle = _useGridLayout.itemContainerStyle,\n    numberOfColumns = _useGridLayout.numberOfColumns,\n    listContentStyle = _useGridLayout.listContentStyle;\n  var _others$itemSpacing = others.itemSpacing,\n    itemSpacing = _others$itemSpacing === void 0 ? DEFAULT_ITEM_SPACINGS : _others$itemSpacing,\n    data = others.data;\n  var itemsOrder = useSharedValue(generateItemsOrder(data));\n  useDidUpdate(function () {\n    itemsOrder.value = generateItemsOrder(data);\n  }, [data]);\n  var presenter = usePresenter(numberOfColumns, itemSpacing);\n  var onChange = useCallback(function () {\n    var newData = [];\n    var dataByIds = _mapKeys(data, 'id');\n    if (data != null && data.length) {\n      itemsOrder.value.forEach(function (itemId) {\n        newData.push(dataByIds[itemId]);\n      });\n    }\n    onOrderChange == null ? void 0 : onOrderChange(newData, itemsOrder.value);\n  }, [onOrderChange, data]);\n  var _renderItem = useCallback(function (_ref) {\n    var item = _ref.item,\n      index = _ref.index;\n    var lastItemInRow = (index + 1) % numberOfColumns === 0;\n    return _jsx(SortableItem, _objectSpread(_objectSpread({\n      data: data\n    }, presenter), {}, {\n      style: [itemContainerStyle, lastItemInRow && {\n        marginRight: 0\n      }],\n      itemsOrder: itemsOrder,\n      id: item.id,\n      onChange: onChange,\n      children: renderItem({\n        item: item,\n        index: index\n      })\n    }), item.id);\n  }, [data]);\n  return _jsx(GestureHandlerRootView, {\n    children: _jsx(ScrollView, {\n      contentContainerStyle: [styles.listContent, listContentStyle],\n      children: _map(data, function (item, index) {\n        return _renderItem({\n          item: item,\n          index: index\n        });\n      })\n    })\n  });\n}\nexport { SortableGridListProps };\nexport default SortableGridList;\nvar styles = StyleSheet.create({\n  listContent: {\n    flexWrap: 'wrap',\n    flexDirection: 'row'\n  }\n});","map":{"version":3,"names":["_mapKeys","_map","React","useCallback","StyleSheet","ScrollView","GestureHandlerRootView","useSharedValue","useDidUpdate","SortableItem","usePresenter","SortableGridListProps","useGridLayout","DEFAULT_ITEM_SPACINGS","jsx","_jsx","generateItemsOrder","data","item","id","SortableGridList","props","renderItem","onOrderChange","others","_objectWithoutProperties","_excluded","_useGridLayout","itemContainerStyle","numberOfColumns","listContentStyle","_others$itemSpacing","itemSpacing","itemsOrder","value","presenter","onChange","newData","dataByIds","length","forEach","itemId","push","_renderItem","_ref","index","lastItemInRow","_objectSpread","style","marginRight","children","contentContainerStyle","styles","listContent","create","flexWrap","flexDirection"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/sortableGridList/index.js"],"sourcesContent":["import _mapKeys from \"lodash/mapKeys\";\nimport _map from \"lodash/map\";\nimport React, { useCallback } from 'react';\nimport { StyleSheet, ScrollView } from 'react-native';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport { useSharedValue } from 'react-native-reanimated';\nimport { useDidUpdate } from \"../../hooks\";\nimport SortableItem from \"./SortableItem\";\nimport usePresenter from \"./usePresenter\";\nimport { SortableGridListProps } from \"./types\";\nimport useGridLayout, { DEFAULT_ITEM_SPACINGS } from \"../gridList/useGridLayout\";\nfunction generateItemsOrder(data) {\n  return _map(data, item => item.id);\n}\nfunction SortableGridList(props) {\n  const {\n    renderItem,\n    onOrderChange,\n    ...others\n  } = props;\n  const {\n    itemContainerStyle,\n    numberOfColumns,\n    listContentStyle\n  } = useGridLayout(props);\n  const {\n    itemSpacing = DEFAULT_ITEM_SPACINGS,\n    data\n  } = others;\n  const itemsOrder = useSharedValue(generateItemsOrder(data));\n  useDidUpdate(() => {\n    itemsOrder.value = generateItemsOrder(data);\n  }, [data]);\n  const presenter = usePresenter(numberOfColumns, itemSpacing);\n  const onChange = useCallback(() => {\n    const newData = [];\n    const dataByIds = _mapKeys(data, 'id');\n    if (data?.length) {\n      itemsOrder.value.forEach(itemId => {\n        newData.push(dataByIds[itemId]);\n      });\n    }\n    onOrderChange?.(newData, itemsOrder.value);\n  }, [onOrderChange, data]);\n  const _renderItem = useCallback(({\n    item,\n    index\n  }) => {\n    const lastItemInRow = (index + 1) % numberOfColumns === 0;\n    return <SortableItem key={item.id} data={data} {...presenter} style={[itemContainerStyle, lastItemInRow && {\n      marginRight: 0\n    }]} itemsOrder={itemsOrder} id={item.id} onChange={onChange}>\n        {/* @ts-expect-error */}\n        {renderItem({\n        item,\n        index\n      })}\n      </SortableItem>;\n  }, [data]);\n  return <GestureHandlerRootView>\n      <ScrollView contentContainerStyle={[styles.listContent, listContentStyle]}>\n        {_map(data, (item, index) => _renderItem({\n        item,\n        index\n      }))}\n      </ScrollView>\n    </GestureHandlerRootView>;\n}\nexport { SortableGridListProps };\nexport default SortableGridList;\nconst styles = StyleSheet.create({\n  listContent: {\n    flexWrap: 'wrap',\n    flexDirection: 'row'\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}