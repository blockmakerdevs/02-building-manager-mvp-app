{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"testID\", \"index\", \"lazy\", \"renderLoading\", \"lazyLoadTime\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useCallback, useContext, useState, useMemo } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Reanimated, { useAnimatedStyle, useAnimatedReaction, runOnJS } from 'react-native-reanimated';\nimport TabBarContext from \"./TabBarContext\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function TabPage(_ref) {\n  var testID = _ref.testID,\n    index = _ref.index,\n    lazy = _ref.lazy,\n    renderLoading = _ref.renderLoading,\n    _ref$lazyLoadTime = _ref.lazyLoadTime,\n    lazyLoadTime = _ref$lazyLoadTime === void 0 ? 100 : _ref$lazyLoadTime,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _useContext = useContext(TabBarContext),\n    currentPage = _useContext.currentPage,\n    asCarousel = _useContext.asCarousel,\n    containerWidth = _useContext.containerWidth;\n  var _useState = useState(!lazy),\n    _useState2 = _slicedToArray(_useState, 2),\n    shouldLoad = _useState2[0],\n    setLoaded = _useState2[1];\n  var lazyLoad = useCallback(function () {\n    if (lazy && !shouldLoad) {\n      setTimeout(function () {\n        setLoaded(true);\n      }, lazyLoadTime);\n    }\n  }, [lazy, shouldLoad]);\n  useAnimatedReaction(function () {\n    return currentPage.value;\n  }, function (currentPage) {\n    var isActive = currentPage === index;\n    if (isActive) {\n      runOnJS(lazyLoad)();\n    }\n  }, [currentPage, lazyLoad]);\n  var animatedPageStyle = useAnimatedStyle(function () {\n    var isActive = Math.round(currentPage.value) === index;\n    return {\n      opacity: isActive || asCarousel ? 1 : 0,\n      zIndex: isActive || asCarousel ? 1 : 0\n    };\n  });\n  var style = useMemo(function () {\n    return [!asCarousel && styles.page, animatedPageStyle, {\n      width: asCarousel ? containerWidth : undefined\n    }];\n  }, [asCarousel, animatedPageStyle, containerWidth]);\n  return _jsxs(Reanimated.View, {\n    style: style,\n    testID: testID,\n    children: [!shouldLoad && (renderLoading == null ? void 0 : renderLoading()), shouldLoad && props.children]\n  });\n}\nvar styles = StyleSheet.create({\n  page: _objectSpread({}, StyleSheet.absoluteFillObject)\n});","map":{"version":3,"names":["React","useCallback","useContext","useState","useMemo","StyleSheet","Reanimated","useAnimatedStyle","useAnimatedReaction","runOnJS","TabBarContext","jsxs","_jsxs","TabPage","_ref","testID","index","lazy","renderLoading","_ref$lazyLoadTime","lazyLoadTime","props","_objectWithoutProperties","_excluded","_useContext","currentPage","asCarousel","containerWidth","_useState","_useState2","_slicedToArray","shouldLoad","setLoaded","lazyLoad","setTimeout","value","isActive","animatedPageStyle","Math","round","opacity","zIndex","style","styles","page","width","undefined","View","children","create","_objectSpread","absoluteFillObject"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/tabController/TabPage.js"],"sourcesContent":["import React, { useCallback, useContext, useState, useMemo } from 'react';\nimport { StyleSheet } from 'react-native';\nimport Reanimated, { useAnimatedStyle, useAnimatedReaction, runOnJS } from 'react-native-reanimated';\n// import {Freeze} from 'react-freeze';\nimport TabBarContext from \"./TabBarContext\";\n/**\n * @description: TabController's TabPage\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/TabControllerScreen/index.tsx\n */\nexport default function TabPage({\n  testID,\n  index,\n  lazy,\n  renderLoading,\n  lazyLoadTime = 100,\n  ...props\n}) {\n  const {\n    currentPage,\n    asCarousel,\n    containerWidth\n  } = useContext(TabBarContext);\n  const [shouldLoad, setLoaded] = useState(!lazy);\n  // const [focused, setFocused] = useState(false);\n\n  const lazyLoad = useCallback(() => {\n    if (lazy && !shouldLoad) {\n      setTimeout(() => {\n        setLoaded(true);\n      }, lazyLoadTime);\n    }\n  }, [lazy, shouldLoad]);\n  useAnimatedReaction(() => {\n    return currentPage.value;\n  }, (currentPage /* , previousPage */) => {\n    const isActive = currentPage === index;\n    // const wasActive = previousPage === index;\n    // const nearActive = asCarousel && (currentPage - 1 === index || currentPage + 1 === index);\n    // const wasNearActive =\n    //     asCarousel && previousPage !== null && (previousPage - 1 === index || previousPage + 1 === index);\n\n    if (isActive) {\n      runOnJS(lazyLoad)();\n    }\n\n    // if (isActive || nearActive) {\n    //   runOnJS(setFocused)(true);\n    // } else if (wasActive || wasNearActive) {\n    //   runOnJS(setFocused)(false);\n    // }\n  }, [currentPage, lazyLoad]);\n  const animatedPageStyle = useAnimatedStyle(() => {\n    const isActive = Math.round(currentPage.value) === index;\n    return {\n      opacity: isActive || asCarousel ? 1 : 0,\n      zIndex: isActive || asCarousel ? 1 : 0\n    };\n  });\n  const style = useMemo(() => {\n    return [!asCarousel && styles.page, animatedPageStyle, {\n      width: asCarousel ? containerWidth : undefined\n    }];\n  }, [asCarousel, animatedPageStyle, containerWidth]);\n  return <Reanimated.View style={style} testID={testID}>\n      {!shouldLoad && renderLoading?.()}\n      {shouldLoad && props.children}\n      {/* <Freeze freeze={!shouldLoad || !focused}>{props.children}</Freeze> */}\n    </Reanimated.View>;\n}\nconst styles = StyleSheet.create({\n  page: {\n    ...StyleSheet.absoluteFillObject\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}