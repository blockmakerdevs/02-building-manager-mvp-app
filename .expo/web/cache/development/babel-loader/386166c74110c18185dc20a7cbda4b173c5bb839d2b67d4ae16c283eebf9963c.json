{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nimport React, { Component } from 'react';\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var GestureDirections = function (GestureDirections) {\n  GestureDirections[\"UP\"] = \"up\";\n  GestureDirections[\"DOWN\"] = \"down\";\n  return GestureDirections;\n}({});\nvar SWIPE_VELOCITY = 1.8;\nvar SPEED = 20;\nvar BOUNCINESS = 6;\nvar PanGestureView = function (_Component) {\n  _inherits(PanGestureView, _Component);\n  function PanGestureView(props) {\n    var _this;\n    _classCallCheck(this, PanGestureView);\n    _this = _callSuper(this, PanGestureView, [props]);\n    _this.handleMoveShouldSetPanResponder = function (_e, gestureState) {\n      var dy = gestureState.dy;\n      return dy > 5 || dy < -5;\n    };\n    _this.handlePanResponderGrant = function () {\n      _this.swipe = false;\n    };\n    _this.handlePanResponderMove = function (_e, gestureState) {\n      var direction = _this.props.direction;\n      var newValue = 0;\n      var up = direction === GestureDirections.UP;\n      var panDeltaY = gestureState.dy;\n      var panVelocityY = gestureState.vy;\n      if (Math.abs(panVelocityY) >= SWIPE_VELOCITY) {\n        if (up && panVelocityY < 0 || !up && panVelocityY > 0) {\n          _this.swipe = true;\n        }\n      } else if (up && panDeltaY < 0 || !up && panDeltaY > 0) {\n        newValue = panDeltaY;\n        _this.animateDeltaY(Math.round(newValue));\n      }\n    };\n    _this.handlePanResponderEnd = function () {\n      if (!_this.swipe) {\n        var direction = _this.props.direction;\n        var up = direction === GestureDirections.UP;\n        var deltaY = _this.state.deltaY;\n        var threshold = _this.layout.height / 2;\n        var endValue = Math.round(deltaY._value);\n        if (up && endValue <= -threshold || !up && endValue >= threshold) {\n          _this.animateDismiss();\n        } else {\n          _this.animateDeltaY(0);\n        }\n      } else {\n        _this.animateDismiss();\n      }\n    };\n    _this.onAnimatedFinished = function (_ref) {\n      var finished = _ref.finished;\n      if (finished) {\n        _this.onDismiss();\n      }\n    };\n    _this.onDismiss = function () {\n      _this.initPositions();\n      _this.props.onDismiss == null ? void 0 : _this.props.onDismiss();\n    };\n    _this.onLayout = function (event) {\n      _this.layout = event.nativeEvent.layout;\n    };\n    _this.state = {\n      deltaY: new Animated.Value(0)\n    };\n    _this.panResponder = PanResponder.create({\n      onMoveShouldSetPanResponder: _this.handleMoveShouldSetPanResponder,\n      onPanResponderGrant: _this.handlePanResponderGrant,\n      onPanResponderMove: _this.handlePanResponderMove,\n      onPanResponderRelease: _this.handlePanResponderEnd,\n      onPanResponderTerminate: _this.handlePanResponderEnd\n    });\n    return _this;\n  }\n  _createClass(PanGestureView, [{\n    key: \"animateDeltaY\",\n    value: function animateDeltaY(toValue) {\n      var deltaY = this.state.deltaY;\n      Animated.spring(deltaY, {\n        toValue: toValue,\n        useNativeDriver: true,\n        speed: SPEED,\n        bounciness: BOUNCINESS\n      }).start();\n    }\n  }, {\n    key: \"animateDismiss\",\n    value: function animateDismiss() {\n      var direction = this.props.direction;\n      var up = direction === GestureDirections.UP;\n      var deltaY = this.state.deltaY;\n      var newValue = up ? -this.layout.height - Constants.statusBarHeight : deltaY._value + Constants.screenHeight;\n      Animated.timing(deltaY, {\n        toValue: Math.round(newValue),\n        useNativeDriver: true,\n        duration: 280\n      }).start(this.onAnimatedFinished);\n    }\n  }, {\n    key: \"initPositions\",\n    value: function initPositions() {\n      this.setState({\n        deltaY: new Animated.Value(0)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var style = this.props.style;\n      var deltaY = this.state.deltaY;\n      return _jsx(Animated.View, _objectSpread(_objectSpread({\n        style: [style, {\n          transform: [{\n            translateY: deltaY\n          }]\n        }]\n      }, this.panResponder.panHandlers), {}, {\n        onLayout: this.onLayout,\n        children: this.props.children\n      }));\n    }\n  }]);\n  return PanGestureView;\n}(Component);\nPanGestureView.displayName = 'PanGestureView';\nPanGestureView.defaultProps = {\n  direction: GestureDirections.DOWN\n};\nPanGestureView.directions = GestureDirections;\nexport default asBaseComponent(PanGestureView);","map":{"version":3,"names":["React","Component","PanResponder","Animated","Constants","asBaseComponent","jsx","_jsx","GestureDirections","SWIPE_VELOCITY","SPEED","BOUNCINESS","PanGestureView","_Component","_inherits","props","_this","_classCallCheck","_callSuper","handleMoveShouldSetPanResponder","_e","gestureState","dy","handlePanResponderGrant","swipe","handlePanResponderMove","direction","newValue","up","UP","panDeltaY","panVelocityY","vy","Math","abs","animateDeltaY","round","handlePanResponderEnd","deltaY","state","threshold","layout","height","endValue","_value","animateDismiss","onAnimatedFinished","_ref","finished","onDismiss","initPositions","onLayout","event","nativeEvent","Value","panResponder","create","onMoveShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","onPanResponderRelease","onPanResponderTerminate","_createClass","key","value","toValue","spring","useNativeDriver","speed","bounciness","start","statusBarHeight","screenHeight","timing","duration","setState","render","style","View","_objectSpread","transform","translateY","panHandlers","children","displayName","defaultProps","DOWN","directions"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/panningViews/panGestureView.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { PanResponder, Animated } from 'react-native';\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nexport let GestureDirections = /*#__PURE__*/function (GestureDirections) {\n  GestureDirections[\"UP\"] = \"up\";\n  GestureDirections[\"DOWN\"] = \"down\";\n  return GestureDirections;\n}({});\nconst SWIPE_VELOCITY = 1.8;\nconst SPEED = 20;\nconst BOUNCINESS = 6;\n/**\n * @description: PanGestureView component for drag and swipe gestures (supports only vertical gestures at the moment)\n */\nclass PanGestureView extends Component {\n  static displayName = 'PanGestureView';\n  static defaultProps = {\n    direction: GestureDirections.DOWN\n  };\n  static directions = GestureDirections;\n  constructor(props) {\n    super(props);\n    this.state = {\n      deltaY: new Animated.Value(0)\n    };\n    this.panResponder = PanResponder.create({\n      onMoveShouldSetPanResponder: this.handleMoveShouldSetPanResponder,\n      onPanResponderGrant: this.handlePanResponderGrant,\n      onPanResponderMove: this.handlePanResponderMove,\n      onPanResponderRelease: this.handlePanResponderEnd,\n      onPanResponderTerminate: this.handlePanResponderEnd\n    });\n  }\n  handleMoveShouldSetPanResponder = (_e, gestureState) => {\n    // return true if user is swiping, return false if it's a single click\n    const {\n      dy\n    } = gestureState;\n    return dy > 5 || dy < -5;\n  };\n  handlePanResponderGrant = () => {\n    this.swipe = false;\n  };\n  handlePanResponderMove = (_e, gestureState) => {\n    const {\n      direction\n    } = this.props;\n    let newValue = 0;\n\n    // VERTICAL\n    const up = direction === GestureDirections.UP;\n    const panDeltaY = gestureState.dy;\n    const panVelocityY = gestureState.vy;\n    if (Math.abs(panVelocityY) >= SWIPE_VELOCITY) {\n      if (up && panVelocityY < 0 || !up && panVelocityY > 0) {\n        // Swipe\n        this.swipe = true;\n      }\n    } else if (up && panDeltaY < 0 || !up && panDeltaY > 0) {\n      // Drag\n      newValue = panDeltaY;\n      this.animateDeltaY(Math.round(newValue));\n    }\n  };\n  handlePanResponderEnd = () => {\n    if (!this.swipe) {\n      const {\n        direction\n      } = this.props;\n\n      // VERTICAL\n      const up = direction === GestureDirections.UP;\n      const {\n        deltaY\n      } = this.state;\n      // @ts-ignore\n      const threshold = this.layout.height / 2;\n      // @ts-ignore\n      const endValue = Math.round(deltaY._value);\n      if (up && endValue <= -threshold || !up && endValue >= threshold) {\n        this.animateDismiss();\n      } else {\n        // back to initial position\n        this.animateDeltaY(0);\n      }\n    } else {\n      this.animateDismiss();\n    }\n  };\n  animateDeltaY(toValue) {\n    const {\n      deltaY\n    } = this.state;\n    Animated.spring(deltaY, {\n      toValue,\n      useNativeDriver: true,\n      speed: SPEED,\n      bounciness: BOUNCINESS\n    }).start();\n  }\n  animateDismiss() {\n    const {\n      direction\n    } = this.props;\n\n    // VERTICAL\n    const up = direction === GestureDirections.UP;\n    const {\n      deltaY\n    } = this.state;\n    // @ts-ignore\n    const newValue = up ? -this.layout.height - Constants.statusBarHeight : deltaY._value + Constants.screenHeight;\n    Animated.timing(deltaY, {\n      toValue: Math.round(newValue),\n      useNativeDriver: true,\n      duration: 280\n    }).start(this.onAnimatedFinished);\n  }\n  onAnimatedFinished = ({\n    finished\n  }) => {\n    if (finished) {\n      this.onDismiss();\n    }\n  };\n  onDismiss = () => {\n    this.initPositions();\n    this.props.onDismiss?.();\n  };\n  initPositions() {\n    this.setState({\n      deltaY: new Animated.Value(0)\n    });\n  }\n  onLayout = event => {\n    this.layout = event.nativeEvent.layout;\n  };\n  render() {\n    const {\n      style\n    } = this.props;\n\n    // VERTICAL\n    const {\n      deltaY\n    } = this.state;\n    return <Animated.View style={[style, {\n      transform: [{\n        translateY: deltaY\n      }]\n    }]} {...this.panResponder.panHandlers} onLayout={this.onLayout}>\n        {this.props.children}\n      </Animated.View>;\n  }\n}\nexport default asBaseComponent(PanGestureView);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}