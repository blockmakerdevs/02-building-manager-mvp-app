{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport _map from \"lodash/map\";\nimport React, { useContext } from 'react';\nimport { useSharedValue, useAnimatedReaction, withTiming, Easing, runOnJS, useAnimatedStyle, withSpring } from 'react-native-reanimated';\nimport { GestureDetector, Gesture } from 'react-native-gesture-handler';\nimport View from \"../view\";\nimport { Shadows, Colors } from \"../../style\";\nimport { useDidUpdate } from \"../../hooks\";\nimport SortableListContext from \"./SortableListContext\";\nimport usePresenter from \"./usePresenter\";\nimport { HapticService, HapticType } from \"../../services\";\nimport { StyleUtils } from \"../../utils\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var DEFAULT_LIST_ITEM_SIZE = 52;\nvar animationConfig = {\n  easing: Easing.inOut(Easing.ease),\n  duration: 350\n};\nvar LIST_ITEM_BACKGROUND = Colors.$backgroundDefault;\nvar SortableListItem = function SortableListItem(props) {\n  var children = props.children,\n    index = props.index;\n  var _useContext = useContext(SortableListContext),\n    data = _useContext.data,\n    itemSize = _useContext.itemSize,\n    horizontal = _useContext.horizontal,\n    itemProps = _useContext.itemProps,\n    onItemLayout = _useContext.onItemLayout,\n    itemsOrder = _useContext.itemsOrder,\n    lockedIds = _useContext.lockedIds,\n    onChange = _useContext.onChange,\n    enableHaptic = _useContext.enableHaptic,\n    _useContext$scale = _useContext.scale,\n    propsScale = _useContext$scale === void 0 ? 1 : _useContext$scale;\n  var _usePresenter = usePresenter(),\n    getTranslationByIndexChange = _usePresenter.getTranslationByIndexChange,\n    getItemIndexById = _usePresenter.getItemIndexById,\n    getIndexByPosition = _usePresenter.getIndexByPosition,\n    getIdByItemIndex = _usePresenter.getIdByItemIndex;\n  var id = data[index].id;\n  var locked = data[index].locked;\n  var initialIndex = useSharedValue(_map(data, 'id').indexOf(id));\n  var currIndex = useSharedValue(initialIndex.value);\n  var translation = useSharedValue(0);\n  var isDragging = useSharedValue(false);\n  var draggedItemShadow = useSharedValue(StyleUtils.unpackStyle(_objectSpread(_objectSpread({}, Shadows.sh30.bottom), Shadows.sh30.top)));\n  var defaultItemShadow = useSharedValue(StyleUtils.unpackStyle({\n    shadowColor: Colors.transparent,\n    elevation: 0\n  }));\n  var tempTranslation = useSharedValue(0);\n  var tempItemsOrder = useSharedValue(itemsOrder.value);\n  useDidUpdate(function () {\n    var newItemIndex = _map(data, 'id').indexOf(id);\n    initialIndex.value = newItemIndex;\n    currIndex.value = newItemIndex;\n    translation.value = 0;\n  }, [data]);\n  useAnimatedReaction(function () {\n    return getItemIndexById(itemsOrder.value, id);\n  }, function (newIndex, prevIndex) {\n    if (prevIndex === null || newIndex === prevIndex) {\n      return;\n    }\n    currIndex.value = newIndex;\n    if (!isDragging.value) {\n      var _translation = getTranslationByIndexChange(currIndex.value, initialIndex.value, itemSize.value);\n      translation.value = withTiming(_translation, animationConfig);\n    }\n  }, []);\n  var dragOnLongPressGesture = Gesture.Pan().activateAfterLongPress(250).enabled(!locked).onStart(function () {\n    isDragging.value = true;\n    translation.value = getTranslationByIndexChange(currIndex.value, initialIndex.value, itemSize.value);\n    tempTranslation.value = translation.value;\n    tempItemsOrder.value = itemsOrder.value;\n  }).onTouchesMove(function () {\n    if (enableHaptic && !isDragging.value) {\n      runOnJS(HapticService.triggerHaptic)(HapticType.selection, 'SortableList');\n    }\n  }).onUpdate(function (event) {\n    var translationX = event.translationX,\n      translationY = event.translationY;\n    var _translation = horizontal ? translationX : translationY;\n    translation.value = tempTranslation.value + _translation;\n    var newIndex = getIndexByPosition(translation.value, itemSize.value) + initialIndex.value;\n    var oldIndex = getItemIndexById(itemsOrder.value, id);\n    if (newIndex !== oldIndex) {\n      if (Math.abs(newIndex - oldIndex) > 1) {\n        newIndex = Math.sign(newIndex - oldIndex) + oldIndex;\n      }\n      var itemIdToSwap = getIdByItemIndex(itemsOrder.value, newIndex);\n      while (lockedIds.value[itemIdToSwap]) {\n        var skipDirection = Math.sign(newIndex - oldIndex);\n        newIndex = skipDirection + newIndex;\n        itemIdToSwap = getIdByItemIndex(itemsOrder.value, newIndex);\n      }\n      if (itemIdToSwap !== undefined) {\n        var newItemsOrder = _toConsumableArray(itemsOrder.value);\n        newItemsOrder[newIndex] = id;\n        newItemsOrder[oldIndex] = itemIdToSwap;\n        itemsOrder.value = newItemsOrder;\n      }\n    }\n  }).onEnd(function () {\n    var _translation = getTranslationByIndexChange(getItemIndexById(itemsOrder.value, id), getItemIndexById(tempItemsOrder.value, id), itemSize.value);\n    translation.value = withTiming(tempTranslation.value + _translation, animationConfig, function () {\n      if (tempItemsOrder.value.toString() !== itemsOrder.value.toString()) {\n        runOnJS(onChange)();\n      }\n    });\n  }).onFinalize(function () {\n    if (isDragging.value) {\n      isDragging.value = false;\n    }\n  });\n  var draggedAnimatedStyle = useAnimatedStyle(function () {\n    var scale = withSpring(isDragging.value ? propsScale : 1);\n    var zIndex = isDragging.value ? 100 : withTiming(0, animationConfig);\n    var opacity = isDragging.value ? 0.95 : 1;\n    var shadow = isDragging.value ? draggedItemShadow.value : defaultItemShadow.value;\n    return _objectSpread(_objectSpread({\n      backgroundColor: LIST_ITEM_BACKGROUND,\n      zIndex: zIndex,\n      transform: [horizontal ? {\n        translateX: translation.value\n      } : {\n        translateY: translation.value\n      }, {\n        scale: scale\n      }],\n      opacity: opacity\n    }, itemProps == null ? void 0 : itemProps.margins), shadow);\n  });\n  return _jsx(GestureDetector, {\n    gesture: dragOnLongPressGesture,\n    children: _jsx(View, {\n      reanimated: true,\n      style: draggedAnimatedStyle,\n      onLayout: index === 0 ? onItemLayout : undefined,\n      children: children\n    })\n  });\n};\nexport default React.memo(SortableListItem);","map":{"version":3,"names":["_map","React","useContext","useSharedValue","useAnimatedReaction","withTiming","Easing","runOnJS","useAnimatedStyle","withSpring","GestureDetector","Gesture","View","Shadows","Colors","useDidUpdate","SortableListContext","usePresenter","HapticService","HapticType","StyleUtils","jsx","_jsx","DEFAULT_LIST_ITEM_SIZE","animationConfig","easing","inOut","ease","duration","LIST_ITEM_BACKGROUND","$backgroundDefault","SortableListItem","props","children","index","_useContext","data","itemSize","horizontal","itemProps","onItemLayout","itemsOrder","lockedIds","onChange","enableHaptic","_useContext$scale","scale","propsScale","_usePresenter","getTranslationByIndexChange","getItemIndexById","getIndexByPosition","getIdByItemIndex","id","locked","initialIndex","indexOf","currIndex","value","translation","isDragging","draggedItemShadow","unpackStyle","_objectSpread","sh30","bottom","top","defaultItemShadow","shadowColor","transparent","elevation","tempTranslation","tempItemsOrder","newItemIndex","newIndex","prevIndex","_translation","dragOnLongPressGesture","Pan","activateAfterLongPress","enabled","onStart","onTouchesMove","triggerHaptic","selection","onUpdate","event","translationX","translationY","oldIndex","Math","abs","sign","itemIdToSwap","skipDirection","undefined","newItemsOrder","_toConsumableArray","onEnd","toString","onFinalize","draggedAnimatedStyle","zIndex","opacity","shadow","backgroundColor","transform","translateX","translateY","margins","gesture","reanimated","style","onLayout","memo"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/sortableList/SortableListItem.js"],"sourcesContent":["import _map from \"lodash/map\";\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useContext } from 'react';\nimport { useSharedValue, useAnimatedReaction, withTiming, Easing, runOnJS, useAnimatedStyle, withSpring } from 'react-native-reanimated';\nimport { GestureDetector, Gesture } from 'react-native-gesture-handler';\nimport View from \"../view\";\nimport { Shadows, Colors } from \"../../style\";\nimport { useDidUpdate } from \"../../hooks\";\nimport SortableListContext from \"./SortableListContext\";\nimport usePresenter from \"./usePresenter\";\nimport { HapticService, HapticType } from \"../../services\";\nimport { StyleUtils } from \"../../utils\";\nexport const DEFAULT_LIST_ITEM_SIZE = 52;\nconst animationConfig = {\n  easing: Easing.inOut(Easing.ease),\n  duration: 350\n};\n\n// Reanimated 3 - Solving the following error:\n// ReanimatedError: Trying to access property `$backgroundDefault` of an object which cannot be sent to the UI runtime., js engine: reanimated\nconst LIST_ITEM_BACKGROUND = Colors.$backgroundDefault;\nconst SortableListItem = props => {\n  const {\n    children,\n    index\n  } = props;\n  const {\n    data,\n    itemSize,\n    horizontal,\n    itemProps,\n    onItemLayout,\n    itemsOrder,\n    lockedIds,\n    onChange,\n    enableHaptic,\n    scale: propsScale = 1\n  } = useContext(SortableListContext);\n  const {\n    getTranslationByIndexChange,\n    getItemIndexById,\n    getIndexByPosition,\n    getIdByItemIndex\n  } = usePresenter();\n  const id = data[index].id;\n  const locked = data[index].locked;\n  const initialIndex = useSharedValue(_map(data, 'id').indexOf(id));\n  const currIndex = useSharedValue(initialIndex.value);\n  const translation = useSharedValue(0);\n  const isDragging = useSharedValue(false);\n  const draggedItemShadow = useSharedValue(StyleUtils.unpackStyle({\n    ...Shadows.sh30.bottom,\n    ...Shadows.sh30.top\n  }));\n  const defaultItemShadow = useSharedValue(StyleUtils.unpackStyle({\n    shadowColor: Colors.transparent,\n    elevation: 0\n  }));\n  const tempTranslation = useSharedValue(0);\n  const tempItemsOrder = useSharedValue(itemsOrder.value);\n  useDidUpdate(() => {\n    const newItemIndex = _map(data, 'id').indexOf(id);\n    initialIndex.value = newItemIndex;\n    currIndex.value = newItemIndex;\n    translation.value = 0;\n  }, [data]);\n  useAnimatedReaction(() => getItemIndexById(itemsOrder.value, id), (newIndex, prevIndex) => {\n    if (prevIndex === null || newIndex === prevIndex) {\n      return;\n    }\n    currIndex.value = newIndex;\n    if (!isDragging.value) {\n      const _translation = getTranslationByIndexChange(currIndex.value, initialIndex.value, itemSize.value);\n      translation.value = withTiming(_translation, animationConfig);\n    }\n  }, []);\n  const dragOnLongPressGesture = Gesture.Pan().activateAfterLongPress(250).enabled(!locked).onStart(() => {\n    isDragging.value = true;\n    translation.value = getTranslationByIndexChange(currIndex.value, initialIndex.value, itemSize.value);\n    tempTranslation.value = translation.value;\n    tempItemsOrder.value = itemsOrder.value;\n  }).onTouchesMove(() => {\n    if (enableHaptic && !isDragging.value) {\n      runOnJS(HapticService.triggerHaptic)(HapticType.selection, 'SortableList');\n    }\n  }).onUpdate(event => {\n    const {\n      translationX,\n      translationY\n    } = event;\n    const _translation = horizontal ? translationX : translationY;\n    translation.value = tempTranslation.value + _translation;\n\n    // Swapping items\n    let newIndex = getIndexByPosition(translation.value, itemSize.value) + initialIndex.value;\n    const oldIndex = getItemIndexById(itemsOrder.value, id);\n    if (newIndex !== oldIndex) {\n      // Sometimes getIndexByPosition will give an index that is off by one because of rounding error (floor\\ceil does not help)\n      if (Math.abs(newIndex - oldIndex) > 1) {\n        newIndex = Math.sign(newIndex - oldIndex) + oldIndex;\n      }\n      let itemIdToSwap = getIdByItemIndex(itemsOrder.value, newIndex);\n\n      // Skip locked item(s)\n      while (lockedIds.value[itemIdToSwap]) {\n        const skipDirection = Math.sign(newIndex - oldIndex);\n        newIndex = skipDirection + newIndex;\n        itemIdToSwap = getIdByItemIndex(itemsOrder.value, newIndex);\n      }\n\n      // Swap items\n      if (itemIdToSwap !== undefined) {\n        const newItemsOrder = [...itemsOrder.value];\n        newItemsOrder[newIndex] = id;\n        newItemsOrder[oldIndex] = itemIdToSwap;\n        itemsOrder.value = newItemsOrder;\n      }\n    }\n  }).onEnd(() => {\n    const _translation = getTranslationByIndexChange(getItemIndexById(itemsOrder.value, id), getItemIndexById(tempItemsOrder.value, id), itemSize.value);\n    translation.value = withTiming(tempTranslation.value + _translation, animationConfig, () => {\n      if (tempItemsOrder.value.toString() !== itemsOrder.value.toString()) {\n        runOnJS(onChange)();\n      }\n    });\n  }).onFinalize(() => {\n    if (isDragging.value) {\n      isDragging.value = false;\n    }\n  });\n  const draggedAnimatedStyle = useAnimatedStyle(() => {\n    const scale = withSpring(isDragging.value ? propsScale : 1);\n    const zIndex = isDragging.value ? 100 : withTiming(0, animationConfig);\n    const opacity = isDragging.value ? 0.95 : 1;\n    const shadow = isDragging.value ? draggedItemShadow.value : defaultItemShadow.value;\n    return {\n      backgroundColor: LIST_ITEM_BACKGROUND,\n      // required for elevation to work in Android\n      zIndex,\n      transform: [horizontal ? {\n        translateX: translation.value\n      } : {\n        translateY: translation.value\n      }, {\n        scale\n      }],\n      opacity,\n      ...itemProps?.margins,\n      ...shadow\n    };\n  });\n  return <GestureDetector gesture={dragOnLongPressGesture}>\n      <View reanimated style={draggedAnimatedStyle} onLayout={index === 0 ? onItemLayout : undefined}>\n        {children}\n      </View>\n    </GestureDetector>;\n};\nexport default React.memo(SortableListItem);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}