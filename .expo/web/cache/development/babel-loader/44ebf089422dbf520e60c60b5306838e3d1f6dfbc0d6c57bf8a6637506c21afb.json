{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _xor from \"lodash/xor\";\nimport _xorBy from \"lodash/xorBy\";\nimport { useCallback, useState, useEffect } from 'react';\nimport { PickerModes } from \"../types\";\nvar usePickerSelection = function usePickerSelection(props) {\n  var migrate = props.migrate,\n    value = props.value,\n    onChange = props.onChange,\n    topBarProps = props.topBarProps,\n    pickerExpandableRef = props.pickerExpandableRef,\n    getItemValue = props.getItemValue,\n    setSearchValue = props.setSearchValue,\n    mode = props.mode;\n  var _useState = useState(value),\n    _useState2 = _slicedToArray(_useState, 2),\n    multiDraftValue = _useState2[0],\n    setMultiDraftValue = _useState2[1];\n  var _useState3 = useState(value),\n    _useState4 = _slicedToArray(_useState3, 2),\n    multiFinalValue = _useState4[0],\n    setMultiFinalValue = _useState4[1];\n  useEffect(function () {\n    if (mode === PickerModes.MULTI && multiFinalValue !== value) {\n      setMultiDraftValue(value);\n      setMultiFinalValue(value);\n    }\n  }, [value]);\n  var onDoneSelecting = useCallback(function (item) {\n    var _pickerExpandableRef$;\n    setSearchValue('');\n    setMultiFinalValue(item);\n    (_pickerExpandableRef$ = pickerExpandableRef.current) == null ? void 0 : _pickerExpandableRef$.closeExpandable == null ? void 0 : _pickerExpandableRef$.closeExpandable();\n    onChange == null ? void 0 : onChange(item);\n  }, [onChange]);\n  var toggleItemSelection = useCallback(function (item) {\n    var newValue;\n    var itemAsArray = [item];\n    if (!migrate) {\n      newValue = _xorBy(multiDraftValue, itemAsArray, getItemValue || 'value');\n    } else {\n      newValue = _xor(multiDraftValue, itemAsArray);\n    }\n    setMultiDraftValue(newValue);\n  }, [multiDraftValue, getItemValue]);\n  var cancelSelect = useCallback(function () {\n    var _pickerExpandableRef$2;\n    setSearchValue('');\n    setMultiDraftValue(multiFinalValue);\n    (_pickerExpandableRef$2 = pickerExpandableRef.current) == null ? void 0 : _pickerExpandableRef$2.closeExpandable == null ? void 0 : _pickerExpandableRef$2.closeExpandable();\n    topBarProps == null ? void 0 : topBarProps.onCancel == null ? void 0 : topBarProps.onCancel();\n  }, [multiFinalValue, topBarProps]);\n  return {\n    multiDraftValue: multiDraftValue,\n    onDoneSelecting: onDoneSelecting,\n    toggleItemSelection: toggleItemSelection,\n    cancelSelect: cancelSelect\n  };\n};\nexport default usePickerSelection;","map":{"version":3,"names":["_xor","_xorBy","useCallback","useState","useEffect","PickerModes","usePickerSelection","props","migrate","value","onChange","topBarProps","pickerExpandableRef","getItemValue","setSearchValue","mode","_useState","_useState2","_slicedToArray","multiDraftValue","setMultiDraftValue","_useState3","_useState4","multiFinalValue","setMultiFinalValue","MULTI","onDoneSelecting","item","_pickerExpandableRef$","current","closeExpandable","toggleItemSelection","newValue","itemAsArray","cancelSelect","_pickerExpandableRef$2","onCancel"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/picker/helpers/usePickerSelection.js"],"sourcesContent":["import _xor from \"lodash/xor\";\nimport _xorBy from \"lodash/xorBy\";\nimport { useCallback, useState, useEffect } from 'react';\nimport { PickerModes } from \"../types\";\nconst usePickerSelection = props => {\n  const {\n    migrate,\n    value,\n    onChange,\n    topBarProps,\n    pickerExpandableRef,\n    getItemValue,\n    setSearchValue,\n    mode\n  } = props;\n  const [multiDraftValue, setMultiDraftValue] = useState(value);\n  const [multiFinalValue, setMultiFinalValue] = useState(value);\n  useEffect(() => {\n    if (mode === PickerModes.MULTI && multiFinalValue !== value) {\n      setMultiDraftValue(value);\n      setMultiFinalValue(value);\n    }\n  }, [value]);\n  const onDoneSelecting = useCallback(item => {\n    setSearchValue('');\n    setMultiFinalValue(item);\n    pickerExpandableRef.current?.closeExpandable?.();\n    onChange?.(item);\n  }, [onChange]);\n  const toggleItemSelection = useCallback(item => {\n    let newValue;\n    const itemAsArray = [item];\n    if (!migrate) {\n      newValue = _xorBy(multiDraftValue, itemAsArray, getItemValue || 'value');\n    } else {\n      newValue = _xor(multiDraftValue, itemAsArray);\n    }\n    setMultiDraftValue(newValue);\n  }, [multiDraftValue, getItemValue]);\n  const cancelSelect = useCallback(() => {\n    setSearchValue('');\n    setMultiDraftValue(multiFinalValue);\n    pickerExpandableRef.current?.closeExpandable?.();\n    topBarProps?.onCancel?.();\n  }, [multiFinalValue, topBarProps]);\n  return {\n    multiDraftValue,\n    onDoneSelecting,\n    toggleItemSelection,\n    cancelSelect\n  };\n};\nexport default usePickerSelection;"],"mappings":";AAAA,OAAOA,IAAI,MAAM,YAAY;AAC7B,OAAOC,MAAM,MAAM,cAAc;AACjC,SAASC,WAAW,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACxD,SAASC,WAAW;AACpB,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAGC,KAAK,EAAI;EAClC,IACEC,OAAO,GAQLD,KAAK,CARPC,OAAO;IACPC,KAAK,GAOHF,KAAK,CAPPE,KAAK;IACLC,QAAQ,GAMNH,KAAK,CANPG,QAAQ;IACRC,WAAW,GAKTJ,KAAK,CALPI,WAAW;IACXC,mBAAmB,GAIjBL,KAAK,CAJPK,mBAAmB;IACnBC,YAAY,GAGVN,KAAK,CAHPM,YAAY;IACZC,cAAc,GAEZP,KAAK,CAFPO,cAAc;IACdC,IAAI,GACFR,KAAK,CADPQ,IAAI;EAEN,IAAAC,SAAA,GAA8Cb,QAAQ,CAACM,KAAK,CAAC;IAAAQ,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAtDG,eAAe,GAAAF,UAAA;IAAEG,kBAAkB,GAAAH,UAAA;EAC1C,IAAAI,UAAA,GAA8ClB,QAAQ,CAACM,KAAK,CAAC;IAAAa,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAtDE,eAAe,GAAAD,UAAA;IAAEE,kBAAkB,GAAAF,UAAA;EAC1ClB,SAAS,CAAC,YAAM;IACd,IAAIW,IAAI,KAAKV,WAAW,CAACoB,KAAK,IAAIF,eAAe,KAAKd,KAAK,EAAE;MAC3DW,kBAAkB,CAACX,KAAK,CAAC;MACzBe,kBAAkB,CAACf,KAAK,CAAC;IAC3B;EACF,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EACX,IAAMiB,eAAe,GAAGxB,WAAW,CAAC,UAAAyB,IAAI,EAAI;IAAA,IAAAC,qBAAA;IAC1Cd,cAAc,CAAC,EAAE,CAAC;IAClBU,kBAAkB,CAACG,IAAI,CAAC;IACxB,CAAAC,qBAAA,GAAAhB,mBAAmB,CAACiB,OAAO,qBAA3BD,qBAAA,CAA6BE,eAAe,oBAA5CF,qBAAA,CAA6BE,eAAe,CAAG,CAAC;IAChDpB,QAAQ,oBAARA,QAAQ,CAAGiB,IAAI,CAAC;EAClB,CAAC,EAAE,CAACjB,QAAQ,CAAC,CAAC;EACd,IAAMqB,mBAAmB,GAAG7B,WAAW,CAAC,UAAAyB,IAAI,EAAI;IAC9C,IAAIK,QAAQ;IACZ,IAAMC,WAAW,GAAG,CAACN,IAAI,CAAC;IAC1B,IAAI,CAACnB,OAAO,EAAE;MACZwB,QAAQ,GAAG/B,MAAM,CAACkB,eAAe,EAAEc,WAAW,EAAEpB,YAAY,IAAI,OAAO,CAAC;IAC1E,CAAC,MAAM;MACLmB,QAAQ,GAAGhC,IAAI,CAACmB,eAAe,EAAEc,WAAW,CAAC;IAC/C;IACAb,kBAAkB,CAACY,QAAQ,CAAC;EAC9B,CAAC,EAAE,CAACb,eAAe,EAAEN,YAAY,CAAC,CAAC;EACnC,IAAMqB,YAAY,GAAGhC,WAAW,CAAC,YAAM;IAAA,IAAAiC,sBAAA;IACrCrB,cAAc,CAAC,EAAE,CAAC;IAClBM,kBAAkB,CAACG,eAAe,CAAC;IACnC,CAAAY,sBAAA,GAAAvB,mBAAmB,CAACiB,OAAO,qBAA3BM,sBAAA,CAA6BL,eAAe,oBAA5CK,sBAAA,CAA6BL,eAAe,CAAG,CAAC;IAChDnB,WAAW,oBAAXA,WAAW,CAAEyB,QAAQ,oBAArBzB,WAAW,CAAEyB,QAAQ,CAAG,CAAC;EAC3B,CAAC,EAAE,CAACb,eAAe,EAAEZ,WAAW,CAAC,CAAC;EAClC,OAAO;IACLQ,eAAe,EAAfA,eAAe;IACfO,eAAe,EAAfA,eAAe;IACfK,mBAAmB,EAAnBA,mBAAmB;IACnBG,YAAY,EAAZA;EACF,CAAC;AACH,CAAC;AACD,eAAe5B,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}