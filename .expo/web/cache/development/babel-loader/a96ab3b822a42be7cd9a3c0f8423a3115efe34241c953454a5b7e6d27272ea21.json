{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _filter from \"lodash/filter\";\nimport _noop from \"lodash/noop\";\nimport React, { useMemo, useEffect, useState, useCallback } from 'react';\nimport { useAnimatedReaction, useSharedValue, withTiming, runOnJS } from 'react-native-reanimated';\nimport { useOrientation, useThemeProps } from \"../../hooks\";\nimport { Constants } from \"../../commons/new\";\nimport TabBarContext from \"./TabBarContext\";\nimport TabBar from \"./TabBar\";\nimport TabBarItem, { TabControllerItemProps } from \"./TabBarItem\";\nimport TabPage from \"./TabPage\";\nimport PageCarousel from \"./PageCarousel\";\nimport useImperativeTabControllerHandle, { TabControllerImperativeMethods } from \"./useImperativeTabControllerHandle\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport { TabControllerItemProps, TabControllerImperativeMethods };\nvar getScreenWidth = function getScreenWidth(useSafeArea) {\n  var _Constants$getSafeAre = Constants.getSafeAreaInsets(),\n    left = _Constants$getSafeAre.left,\n    right = _Constants$getSafeAre.right;\n  return Constants.windowWidth - (useSafeArea && Constants.isIphoneX ? left + right : 0);\n};\nvar TabController = React.forwardRef(function (props, ref) {\n  var themeProps = useThemeProps(props, 'TabController');\n  var _themeProps$initialIn = themeProps.initialIndex,\n    initialIndex = _themeProps$initialIn === void 0 ? 0 : _themeProps$initialIn,\n    _themeProps$asCarouse = themeProps.asCarousel,\n    asCarousel = _themeProps$asCarouse === void 0 ? false : _themeProps$asCarouse,\n    items = themeProps.items,\n    _themeProps$onChangeI = themeProps.onChangeIndex,\n    onChangeIndex = _themeProps$onChangeI === void 0 ? _noop : _themeProps$onChangeI,\n    carouselPageWidth = themeProps.carouselPageWidth,\n    _themeProps$useSafeAr = themeProps.useSafeArea,\n    useSafeArea = _themeProps$useSafeAr === void 0 ? false : _themeProps$useSafeAr,\n    children = themeProps.children;\n  var _useState = useState(getScreenWidth(useSafeArea)),\n    _useState2 = _slicedToArray(_useState, 2),\n    screenWidth = _useState2[0],\n    setScreenWidth = _useState2[1];\n  if ((items == null ? void 0 : items.length) < 2) {\n    console.warn('TabController component expect a minimum of 2 items');\n  }\n  useOrientation({\n    onOrientationChange: function onOrientationChange() {\n      setScreenWidth(getScreenWidth(useSafeArea));\n    }\n  });\n  var pageWidth = useMemo(function () {\n    return carouselPageWidth || screenWidth;\n  }, [carouselPageWidth, screenWidth]);\n  var ignoredItems = useMemo(function () {\n    return _filter(items, function (item) {\n      return item.ignore;\n    });\n  }, [items]);\n  var currentPage = useSharedValue(initialIndex);\n  var targetPage = useSharedValue(initialIndex);\n  var setCurrentIndex = useCallback(function (index) {\n    'worklet';\n\n    currentPage.value = index;\n  }, []);\n  useEffect(function () {\n    setCurrentIndex(initialIndex);\n  }, [initialIndex]);\n  useAnimatedReaction(function () {\n    return currentPage.value;\n  }, function (value, prevValue) {\n    if (value !== prevValue) {\n      targetPage.value = withTiming(value);\n      prevValue !== null && runOnJS(onChangeIndex)(value, prevValue);\n    }\n  });\n  useImperativeTabControllerHandle(ref, setCurrentIndex);\n  var context = useMemo(function () {\n    return {\n      initialIndex: initialIndex,\n      asCarousel: asCarousel,\n      pageWidth: pageWidth,\n      items: items,\n      ignoredItems: ignoredItems,\n      itemsCount: items.length - ignoredItems.length,\n      targetPage: targetPage,\n      currentPage: currentPage,\n      containerWidth: screenWidth,\n      onChangeIndex: onChangeIndex,\n      setCurrentIndex: setCurrentIndex\n    };\n  }, [initialIndex, asCarousel, items, onChangeIndex, screenWidth]);\n  return _jsx(TabBarContext.Provider, {\n    value: context,\n    children: children\n  });\n});\nTabController.TabBar = TabBar;\nTabController.TabBarItem = TabBarItem;\nTabController.TabPage = TabPage;\nTabController.PageCarousel = PageCarousel;\nexport default TabController;","map":{"version":3,"names":["_filter","_noop","React","useMemo","useEffect","useState","useCallback","useAnimatedReaction","useSharedValue","withTiming","runOnJS","useOrientation","useThemeProps","Constants","TabBarContext","TabBar","TabBarItem","TabControllerItemProps","TabPage","PageCarousel","useImperativeTabControllerHandle","TabControllerImperativeMethods","jsx","_jsx","getScreenWidth","useSafeArea","_Constants$getSafeAre","getSafeAreaInsets","left","right","windowWidth","isIphoneX","TabController","forwardRef","props","ref","themeProps","_themeProps$initialIn","initialIndex","_themeProps$asCarouse","asCarousel","items","_themeProps$onChangeI","onChangeIndex","carouselPageWidth","_themeProps$useSafeAr","children","_useState","_useState2","_slicedToArray","screenWidth","setScreenWidth","length","console","warn","onOrientationChange","pageWidth","ignoredItems","item","ignore","currentPage","targetPage","setCurrentIndex","index","value","prevValue","context","itemsCount","containerWidth","Provider"],"sources":["/Users/mac/Repositories/BlockmakerIT/02-building-manager-mvp-app/node_modules/react-native-ui-lib/src/components/tabController/index.js"],"sourcesContent":["import _filter from \"lodash/filter\";\nimport _noop from \"lodash/noop\"; // TODO: support commented props\nimport React, { useMemo, useEffect, useState, useCallback } from 'react';\nimport { useAnimatedReaction, useSharedValue, withTiming, runOnJS } from 'react-native-reanimated';\nimport { useOrientation, useThemeProps } from \"../../hooks\";\nimport { Constants } from \"../../commons/new\";\nimport TabBarContext from \"./TabBarContext\";\nimport TabBar from \"./TabBar\";\nimport TabBarItem, { TabControllerItemProps } from \"./TabBarItem\";\nimport TabPage from \"./TabPage\";\nimport PageCarousel from \"./PageCarousel\";\nimport useImperativeTabControllerHandle, { TabControllerImperativeMethods } from \"./useImperativeTabControllerHandle\";\nexport { TabControllerItemProps, TabControllerImperativeMethods };\nconst getScreenWidth = useSafeArea => {\n  const {\n    left,\n    right\n  } = Constants.getSafeAreaInsets();\n  return Constants.windowWidth - (useSafeArea && Constants.isIphoneX ? left + right : 0);\n};\n\n/**\n * @description: A performant solution for a tab controller with lazy load mechanism\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/TabControllerScreen/index.tsx\n * @notes: This component is based on react-native-gesture-handler\n * @important: On Android, if using react-native-navigation, make sure to wrap your screen with gestureHandlerRootHOC\n * @importantLink: https://kmagiera.github.io/react-native-gesture-handler/docs/getting-started.html#with-wix-react-native-navigation-https-githubcom-wix-react-native-navigation\n */\nconst TabController = React.forwardRef((props, ref) => {\n  const themeProps = useThemeProps(props, 'TabController');\n  const {\n    initialIndex = 0,\n    asCarousel = false,\n    items,\n    onChangeIndex = _noop,\n    carouselPageWidth,\n    useSafeArea = false,\n    children\n  } = themeProps;\n  const [screenWidth, setScreenWidth] = useState(getScreenWidth(useSafeArea));\n  if (items?.length < 2) {\n    console.warn('TabController component expect a minimum of 2 items');\n  }\n  useOrientation({\n    onOrientationChange: () => {\n      setScreenWidth(getScreenWidth(useSafeArea));\n    }\n  });\n  const pageWidth = useMemo(() => {\n    return carouselPageWidth || screenWidth;\n  }, [carouselPageWidth, screenWidth]);\n  const ignoredItems = useMemo(() => {\n    return _filter(items, item => item.ignore);\n  }, [items]);\n\n  /* currentPage - static page index */\n  const currentPage = useSharedValue(initialIndex);\n  /* targetPage - transitioned page index (can be a fraction when transitioning between pages) */\n  const targetPage = useSharedValue(initialIndex);\n  const setCurrentIndex = useCallback(index => {\n    'worklet';\n\n    currentPage.value = index;\n  }, []);\n  useEffect(() => {\n    setCurrentIndex(initialIndex);\n  }, [initialIndex]);\n  useAnimatedReaction(() => {\n    return currentPage.value;\n  }, (value, prevValue) => {\n    if (value !== prevValue) {\n      targetPage.value = withTiming(value);\n      prevValue !== null && runOnJS(onChangeIndex)(value, prevValue);\n    }\n  });\n  useImperativeTabControllerHandle(ref, setCurrentIndex);\n  const context = useMemo(() => {\n    return {\n      /* Pass Props */\n      initialIndex,\n      asCarousel,\n      pageWidth,\n      /* Items */\n      items,\n      ignoredItems,\n      itemsCount: items.length - ignoredItems.length,\n      /* Animated Values */\n      targetPage,\n      currentPage,\n      containerWidth: screenWidth,\n      /* Callbacks */\n      onChangeIndex,\n      setCurrentIndex\n    };\n  }, [initialIndex, asCarousel, items, onChangeIndex, screenWidth]);\n  return <TabBarContext.Provider value={context}>{children}</TabBarContext.Provider>;\n});\n\n// @ts-expect-error\nTabController.TabBar = TabBar;\n// @ts-expect-error\nTabController.TabBarItem = TabBarItem;\n// @ts-expect-error\nTabController.TabPage = TabPage;\n// @ts-expect-error\nTabController.PageCarousel = PageCarousel;\nexport default TabController;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}